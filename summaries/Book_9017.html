<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'>
<title>Tables Viewer v2.1</title>
<style>:root{--main-header-height:56px;}</style>
<link rel="stylesheet" href="assets/style.css?v=1758558011">
<link rel="stylesheet" href="assets/overrides.css?v=1758558011">
</head><body>
<div id="tables-viewer" role="region" aria-label="Tables viewer">
<div id="stickyMainHeader">
<div id="tv-header"><div><h1>Tables Viewer v2.1</h1></div><div style="display:flex;gap:8px;align-items:center;">
<input id="searchBox" type="search" placeholder="Search" aria-label="Search tables" style="min-width:420px; width:44ch;"/>
<button id="modeBtn" type="button" onclick="toggleMode()" aria-label="Toggle theme">Theme</button>
<button id="toggleAllBtn" type="button" aria-label="Toggle all" onclick="toggleAllTables()">Collapse All Tables</button>
<button id="copyAllPlainBtn" type="button" onclick="copyAllTablesPlain()" aria-label="Copy all tables as plain text">Copy All Tables (Plain Text)</button>
<button id="copyAllMdBtn" type="button" onclick="copyAllTablesMarkdown()" aria-label="Copy all tables as markdown">Copy All Tables (Markdown)</button>
<button id="resetAllBtn" type="button" onclick="resetAllTables()" aria-label="Reset all tables">Reset All Tables</button>
</div></div>
<noscript><div style='color:#b91c1c'>JavaScript is disabled. Tables will be shown statically. For large tables enable JS for virtualization.</div></noscript>
<div id="tocBar" role="navigation" aria-label="Table of contents"><ul><li class="toc-item"><a class="toc-link" href="#Table1-title">Table 1</a></li></ul></div></div>
<div class="table-wrapper" id="Table1"><h3 id="Table1-title">Table 1</h3><div class="table-container"><div class="table-header-wrapper" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;"><div class="copy-buttons"><button onclick="copyTablePlain(this)">Copy Plain Table</button><button onclick="copyTableMarkdown(this)">Copy Markdown Table</button></div><div style="display:flex; align-items:center;"><button class="toggle-table-btn" onclick="toggleTable(this)">Collapse Table</button></div></div><table><thead><tr>
        <th style="width:28.57%;" onclick="sortTableByColumn(0,0)" role="button" aria-label="Sort by Priority">
          <div class="th-with-sort">
            <div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Priority</div>
            <button class="sort-btn sort-state-0" onclick="event.stopPropagation(); headerSortButtonClicked(0,0, this)" title="Toggle sort" aria-label="Toggle sort">
              <span class="sort-icon" aria-hidden="true"></span>
            </button>
          </div>
        </th>
        <th style="width:71.43%;" onclick="sortTableByColumn(0,1)" role="button" aria-label="Sort by Adi (inputs/decisions)">
          <div class="th-with-sort">
            <div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Adi (inputs/decisions)</div>
            <button class="sort-btn sort-state-0" onclick="event.stopPropagation(); headerSortButtonClicked(0,1, this)" title="Toggle sort" aria-label="Toggle sort">
              <span class="sort-icon" aria-hidden="true"></span>
            </button>
          </div>
        </th>
        <th style="width:71.43%;" onclick="sortTableByColumn(0,2)" role="button" aria-label="Sort by Assistant (actions/patches)">
          <div class="th-with-sort">
            <div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Assistant (actions/patches)</div>
            <button class="sort-btn sort-state-0" onclick="event.stopPropagation(); headerSortButtonClicked(0,2, this)" title="Toggle sort" aria-label="Toggle sort">
              <span class="sort-icon" aria-hidden="true"></span>
            </button>
          </div>
        </th>
        <th style="width:71.43%;" onclick="sortTableByColumn(0,3)" role="button" aria-label="Sort by Files (touchpoints)">
          <div class="th-with-sort">
            <div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Files (touchpoints)</div>
            <button class="sort-btn sort-state-0" onclick="event.stopPropagation(); headerSortButtonClicked(0,3, this)" title="Toggle sort" aria-label="Toggle sort">
              <span class="sort-icon" aria-hidden="true"></span>
            </button>
          </div>
        </th></tr></thead><tbody><tr><td data-label="Priority"><p><strong>1. Math rendering (\$…\$, $…$)</strong></p></td><td data-label="Adi (inputs/decisions)"><p><ul> <li>Confirm that all math expressions inside source tables should render visually as formulas rather than appear as literal `$…$` text. <br> • Decide whether to use inline math only (`$E=mc^2$`) or also support display math blocks (`$$…$$`). <br> • Approve whether external rendering libraries (KaTeX, MathJax) are allowed or whether a lightweight fallback (custom CSS span + monospace style) is sufficient. <br> • Provide at least one or two Book pages containing math-heavy content for verification.</li> </ul></p></td><td data-label="Assistant (actions/patches)"><p><ul> <li>Extend `render/markdown.py` to include math-friendly Markdown extensions (e.g. `markdown-katex` if available). <br> • If no external library is permitted, implement a fallback pipeline: detect `$…$` inline and wrap in `<span class="math">…</span>`; detect `$$…$$` blocks and wrap in `<div class="math-block">…</div>`. <br> • Patch `render/sanitize.py` so it does not strip out these wrapper tags, while continuing to block malicious inline HTML. <br> • Ensure CSS support in `assets/style.css` by defining `.math { font-family: "Times New Roman", serif; font-style: italic; }` and `.math-block { display:block; text-align:center; margin:0.5em 0; }`. <br> • Conduct regression check to confirm existing tables without math are unaffected.</li> </ul></p></td><td data-label="Files (touchpoints)"><p>`render/markdown.py`, `render/sanitize.py`, `assets/style.css`</p></td></tr>
<tr><td data-label="Priority"><p><strong>2. Footnotes support</strong></p></td><td data-label="Adi (inputs/decisions)"><p><ul> <li>Decide if footnotes should appear inline at the bottom of each table or collected at the end of the full HTML page. <br> • Approve style of footnote markers (e.g. superscript numbers `[1]`, `[a]`, or dagger symbols). <br> • Provide samples of current Book pages where `[ ^1 ]` or `[ ^a ]` notation causes errors.</li> </ul></p></td><td data-label="Assistant (actions/patches)"><p><ul> <li>Enable `footnotes` extension in `render/markdown.py`. <br> • Ensure footnotes render as `<sup id="fnref1">1</sup>` links and that corresponding definitions appear in a separate section with `<div class="footnotes">`. <br> • Adjust `render/sanitize.py` to allow safe `<sup>` tags and `id`/`href` attributes. <br> • Add `.footnotes { font-size:0.85em; color:var(--muted); }` in `assets/style.css`. <br> • Validate output by rendering Book\&#95;0002.html after patching.</li> </ul></p></td><td data-label="Files (touchpoints)"><p>`render/markdown.py`, `render/sanitize.py`, `assets/style.css`</p></td></tr>
<tr><td data-label="Priority"><p><strong>3. Inline HTML safe tags</strong></p></td><td data-label="Adi (inputs/decisions)"><p><ul> <li>Approve whitelist: `<sup>`, `<sub>`, `<mark>`, `<details>`, `<summary>`. <br> • Approve allowed attributes (`aria-expanded`, `open`) for `<details>`. <br> • Decide whether inline styles (e.g. `<span style="color:red">`) should always be stripped or partially preserved.</li> </ul></p></td><td data-label="Assistant (actions/patches)"><p><ul> <li>Patch `render/sanitize.py` whitelist rules to retain approved tags and attributes. <br> • Reject `on&#42;` event handlers (`onclick`, `onerror`). <br> • Ensure nested tags such as `<mark><b>bold</b></mark>` remain safe. <br> • Extend test content with edge cases like `<details><summary>Click</summary>Hidden text</details>`. <br> • Add style rules in `assets/style.css`: `mark { background:yellow; } details { margin:0.5em 0; } summary { cursor:pointer; font-weight:bold; }`.</li> </ul></p></td><td data-label="Files (touchpoints)"><p>`render/sanitize.py`, `assets/style.css`</p></td></tr>
<tr><td data-label="Priority"><p><strong>4. Nested emphasis parsing</strong></p></td><td data-label="Adi (inputs/decisions)"><p><ul> <li>Provide failing snippets such as `<strong><em>~~layered emphasis~~</em></strong>` that currently break rendering. <br> • Decide whether strict Markdown behavior (reject invalid nesting) or “forgiving” rendering is desired.</li> </ul></p></td><td data-label="Assistant (actions/patches)"><p><ul> <li>Tune parser configuration in `render/markdown.py` (likely using `markdown-it-py` or `mistune` if integrated). <br> • Add preprocessing step to normalize mismatched emphasis markers before sending to the parser. <br> • Ensure consistent HTML output for combinations of bold, italic, strike, and underline. <br> • Cross-check with Book\&#95;0002.html to confirm readability.</li> </ul></p></td><td data-label="Files (touchpoints)"><p>`render/markdown.py`</p></td></tr>
<tr><td data-label="Priority"><p><strong>5. RTL & Unicode handling</strong></p></td><td data-label="Adi (inputs/decisions)"><p><ul> <li>Approve normalization form (NFC) so that characters like `e\u0301` and `é` render identically. <br> • Decide if explicit `dir="rtl"` attributes should be injected into table cells containing Arabic/Hebrew. <br> • Provide test snippets in Arabic and Hebrew for verification.</li> </ul></p></td><td data-label="Assistant (actions/patches)"><p><ul> <li>Add Unicode normalization (NFC) in `utils.py` function, applied before rendering cells. <br> • Optionally auto-detect RTL scripts (using `unicodedata.bidirectional`) and wrap affected text in `<span dir="rtl">`. <br> • Ensure `render/core.py` calls normalization function on every cell. <br> • Verify with long mixed-text cells.</li> </ul></p></td><td data-label="Files (touchpoints)"><p>`utils.py`, `render/core.py`</p></td></tr>
<tr><td data-label="Priority"><p><strong>6. Hidden comments policy</strong></p></td><td data-label="Adi (inputs/decisions)"><p><ul> <li>Decide if HTML comments (`<!-</li> <li>… -->`) and Markdown comments (`[//]: #`) must be completely stripped from output or preserved in some way. <br> • Confirm whether hidden metadata inside comments should be accessible in final HTML.</li> </ul></p></td><td data-label="Assistant (actions/patches)"><p><ul> <li>Standardize stripping in `render/sanitize.py`: remove both HTML and Markdown comment styles. <br> • Ensure nothing leaks into HTML output. <br> • Verify Book\&#95;0002.html pages compile without stray comment artifacts.</li> </ul></p></td><td data-label="Files (touchpoints)"><p>`render/sanitize.py`</p></td></tr>
<tr><td data-label="Priority"><p><strong>7. Long cells & performance</strong></p></td><td data-label="Adi (inputs/decisions)"><p><ul> <li>Approve wrapping strategy: `word-break: break-word; white-space: pre-wrap;` for long words. <br> • Confirm maximum recommended cell length (e.g. 500 chars). <br> • Provide a sample table with extremely long cell text for stress testing.</li> </ul></p></td><td data-label="Assistant (actions/patches)"><p><ul> <li>Add CSS in `assets/style.css`: `td { word-wrap: break-word; white-space: pre-wrap; }`. <br> • In `render/core.py`, implement logic to split long unbroken strings with zero-width space or soft hyphen to avoid layout breakage. <br> • Run performance checks to ensure rendering time remains acceptable.</li> </ul></p></td><td data-label="Files (touchpoints)"><p>`render/core.py`, `assets/style.css`</p></td></tr>
</tbody></table></div>
  <div class='row-count'></div>
</div>
<script src="assets/script.js?v=1758558011" defer></script>
<script src="assets/worker.js?v=1758558011" defer></script>

<script>
(function(){
  const template = "{table}_{date}";
  function formatName(tableName) {
    const date = (new Date()).toISOString().slice(0,10);
    return template.replace('{table}', tableName).replace('{date}', date).replace('{user}', '');
  }
  const btn = document.getElementById('exportBtn');
  if(btn) {
    btn.addEventListener('click', async function() {
      try {
        const html = document.documentElement.outerHTML;
        if(html.length > 2000000) {
          alert('Export refused: html too large');
          return;
        }
        if(window.Worker) {
          const worker = new Worker((function(){
            try{ return 'assets/worker.js'; }catch(e){ return null; }
          })());
          if(worker){
            worker.postMessage({html:html, format:'pdf'});
            worker.onmessage = function(e){ console.log('worker:', e.data); alert('Worker replied: '+(e.data.msg||e.data.status)); };
          } else {
            alert('Worker not available');
          }
        } else {
          alert('Export worker not supported in this environment.');
        }
      } catch(err) {
        console.warn('Export failed', err);
        alert('Export worker not available. See console for details.');
      }
    });
  }
})();
</script>

</div>
</body>
</html>