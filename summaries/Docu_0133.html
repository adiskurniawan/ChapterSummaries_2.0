<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'>
<title>Tables Viewer v2.1</title>
<style>:root{--main-header-height:56px;} .table-wrapper{opacity:0;min-height:24px;transition:opacity .12s linear}</style>
<link rel="stylesheet" href="assets/style.css?v=1759925496">
<link rel="stylesheet" href="assets/overrides.css?v=1768544733">
</head><body>
<div id="tables-viewer" role="region" aria-label="Tables viewer">
<div id="stickyMainHeader">
<div id="tv-header">
<div><h1>Tables Viewer v2.1</h1></div>
<div style="display:flex;gap:8px;align-items:center;">
<input id="searchBox" class="tv-search" type="search" placeholder="Search" aria-label="Search tables" />
<button id="modeBtn" type="button" onclick="toggleMode()" aria-label="Toggle theme">Theme</button>
<button id="toggleAllBtn" type="button" aria-label="Toggle all" onclick="toggleAllTables()">Collapse All Tables</button>
<button id="copyAllPlainBtn" class="copy-btn" type="button" onclick="copyAllTablesPlain()" aria-label="Copy all tables as plain text">Copy All Tables (Plain Text)</button>
<button id="copyAllTablesBtn" class="copy-all-btn" type="button" onclick="copyAllTablesMarkdown()" aria-label="Copy All Tables (Markdown)">Copy All Tables (Markdown)</button>
<button id="copyAllMdBtn" style="display:none" aria-hidden="true"></button>
<button id="resetAllBtn" type="button" onclick="resetAllTables()" aria-label="Reset All Tables">Reset All Tables</button>
</div></div>
<script>
(function(){
  function ensureDelegation(){
    try {
      var vis = document.getElementById('copyAllTablesBtn');
      var alias = document.getElementById('copyAllMdBtn');
      if(!vis || !alias) return;
      alias.addEventListener = function(type, listener, options){
        vis.addEventListener(type, listener, options);
      };
      alias.removeEventListener = function(type, listener, options){
        vis.removeEventListener(type, listener, options);
      };
      Object.defineProperty(alias, 'onclick', {
        set: function(fn){ vis.onclick = fn; },
        get: function(){ return vis.onclick; },
        configurable: true
      });
      alias.focus = function(){ vis.focus(); };
      alias.blur = function(){ vis.blur(); };
    } catch(e) {
      try{ console && console.warn && console.warn('alias delegation failed', e); }catch(_){} 
    }
  }
  if(document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', ensureDelegation);
  } else {
    ensureDelegation();
  }
})();
</script>
<noscript><div style='color:#b91c1c'>JavaScript is disabled. Tables will be shown statically. For large tables enable JS for virtualization.</div></noscript>
<div id="tocBar" role="navigation" aria-label="Table of contents"><ul><li class="toc-item"><a class="toc-link" href="#Table1">Table 1</a></li>
<li class="toc-item"><a class="toc-link" href="#Table2">Table 2</a></li>
<li class="toc-item"><a class="toc-link" href="#Table3">Table 3</a></li>
<li class="toc-item"><a class="toc-link" href="#Table4">Table 4</a></li>
<li class="toc-item"><a class="toc-link" href="#Table5">Table 5</a></li></ul></div></div>
<div class="table-caption" id="Table1" data-table="Docu_0133_01" style="margin-top:2mm;margin-left:3mm;"><strong>Table 1</strong></div>
<div class="table-wrapper" data-table-id="table-1"><div class="table-heading-bar" aria-label="Table heading"></div><div class="table-container"><div class="table-header-wrapper" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;"><div class="copy-buttons"><button type="button" class="copy-plain-btn" data-action="copy-plain" onclick="copyTablePlain(this)">Copy Plain Table</button><button type="button" class="copy-markdown-btn" data-action="copy-markdown" onclick="copyTableMarkdown(this)">Copy Markdown Table</button><button type="button" class="export-csv-btn" data-action="export-csv" onclick="exportTableCSV(this)">Export CSV</button><button type="button" class="export-json-btn" data-action="export-json" onclick="exportTableJSON(this)">Export JSON</button><button type="button" class="export-xlsx-btn" data-action="export-xlsx" onclick="exportTableXLSX(this)">Export XLSX</button><button type="button" class="export-pdf-btn" data-action="export-pdf" onclick="exportTablePDF(this)">Export PDF</button><button type="button" class="export-markdown-btn export-markdown-initial" data-action="export-markdown" onclick="exportTableMarkdown(this)" style="display:none" data-initial-hidden="1">Export Markdown</button></div><div style="display:flex; align-items:center;"><button type="button" class="toggle-table-btn" data-action="toggle-collapse" onclick="toggleTable(this)">Collapse Table</button></div></div><table class="tv-table" role="table"><thead><tr><th class="tv-col-left" role="button" aria-label="Sort by **PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1**"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;"><strong>PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1</strong></div><button class="sort-btn sort-state-0" title="Toggle sort" aria-label="Toggle sort"><span class="sort-icon" aria-hidden="true"></span></button></div></th></tr></thead><tbody><tr><td data-label="PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1"> ğŸ“ <strong>Directory Overview</strong><br><br><code>pph21_v1</code><br>â”œâ”€â”€ LICENSE<br>â”œâ”€â”€ README.md<br>â”œâ”€â”€ pyproject.toml<br>â”œâ”€â”€ requirements.txt<br>â”œâ”€â”€ .env.example<br>â”œâ”€â”€ .gitignore<br>â”œâ”€â”€ config\<br>â”‚  â”œâ”€â”€ settings.py<br>â”‚  â”œâ”€â”€ default_rules\<br>â”‚  â”‚  â”œâ”€â”€ ptkp.yml<br>â”‚  â”‚  â”œâ”€â”€ progressive_brackets_v1.yml<br>â”‚  â”‚  â””â”€â”€ dtp_rules_v1.yml<br>â”‚  â”œâ”€â”€ rules_migrations\<br>â”‚  â”‚  â””â”€â”€ README.md<br>â”‚  â””â”€â”€ schema\<br>â”‚     â””â”€â”€ rule_schema.json<br>â”œâ”€â”€ src\<br>â”‚  â””â”€â”€ pph21_v1\<br>â”‚     â”œâ”€â”€ <strong>init</strong>.py<br>â”‚     â”œâ”€â”€ app.py<br>â”‚     â”œâ”€â”€ cli.py<br>â”‚     â”œâ”€â”€ settings.py<br>â”‚     â”œâ”€â”€ constants.py<br>â”‚     â”œâ”€â”€ utils\<br>â”‚     â”‚  â”œâ”€â”€ <strong>init</strong>.py<br>â”‚     â”‚  â”œâ”€â”€ file_ops.py<br>â”‚     â”‚  â”œâ”€â”€ paths.py<br>â”‚     â”‚  â”œâ”€â”€ imports.py<br>â”‚     â”‚  â”œâ”€â”€ log.py<br>â”‚     â”‚  â””â”€â”€ crypto.py<br>â”‚     â”œâ”€â”€ io\<br>â”‚     â”‚  â”œâ”€â”€ <strong>init</strong>.py<br>â”‚     â”‚  â”œâ”€â”€ parsers.py<br>â”‚     â”‚  â”œâ”€â”€ csv_mapper.py<br>â”‚     â”‚  â”œâ”€â”€ excel_reader.py<br>â”‚     â”‚  â””â”€â”€ validators.py<br>â”‚     â”œâ”€â”€ rules\<br>â”‚     â”‚  â”œâ”€â”€ <strong>init</strong>.py<br>â”‚     â”‚  â”œâ”€â”€ progressive.py<br>â”‚     â”‚  â”œâ”€â”€ ter.py<br>â”‚     â”‚  â”œâ”€â”€ ptkp.py<br>â”‚     â”‚  â””â”€â”€ dtp_engine.py<br>â”‚     â”œâ”€â”€ export\<br>â”‚     â”‚  â”œâ”€â”€ <strong>init</strong>.py<br>â”‚     â”‚  â”œâ”€â”€ bukti_potong_csv.py<br>â”‚     â”‚  â”œâ”€â”€ bukti_potong_xml.py<br>â”‚     â”‚  â”œâ”€â”€ spt_masa_prefill.py<br>â”‚     â”‚  â””â”€â”€ manifest.py<br>â”‚     â”œâ”€â”€ audit\<br>â”‚     â”‚  â”œâ”€â”€ <strong>init</strong>.py<br>â”‚     â”‚  â”œâ”€â”€ recorder.py<br>â”‚     â”‚  â”œâ”€â”€ auditor.py<br>â”‚     â”‚  â””â”€â”€ retention.py<br>â”‚     â”œâ”€â”€ reconcile\<br>â”‚     â”‚  â”œâ”€â”€ <strong>init</strong>.py<br>â”‚     â”‚  â”œâ”€â”€ recon_service.py<br>â”‚     â”‚  â””â”€â”€ exception_queue.py<br>â”‚     â”œâ”€â”€ integrations\<br>â”‚     â”‚  â”œâ”€â”€ <strong>init</strong>.py<br>â”‚     â”‚  â”œâ”€â”€ adapter_base.py<br>â”‚     â”‚  â”œâ”€â”€ csv_adapter.py<br>â”‚     â”‚  â”œâ”€â”€ sap_adapter.py<br>â”‚     â”‚  â””â”€â”€ workday_adapter.py<br>â”‚     â”œâ”€â”€ api\<br>â”‚     â”‚  â”œâ”€â”€ <strong>init</strong>.py<br>â”‚     â”‚  â”œâ”€â”€ server.py<br>â”‚     â”‚  â”œâ”€â”€ routes\<br>â”‚     â”‚  â”‚  â”œâ”€â”€ <strong>init</strong>.py<br>â”‚     â”‚  â”‚  â”œâ”€â”€ health.py<br>â”‚     â”‚  â”‚  â”œâ”€â”€ upload.py<br>â”‚     â”‚  â”‚  â”œâ”€â”€ simulate.py<br>â”‚     â”‚  â”‚  â””â”€â”€ export.py<br>â”‚     â”‚  â””â”€â”€ auth.py<br>â”‚     â”œâ”€â”€ ml\<br>â”‚     â”‚  â”œâ”€â”€ <strong>init</strong>.py<br>â”‚     â”‚  â”œâ”€â”€ pipeline.py<br>â”‚     â”‚  â”œâ”€â”€ models\<br>â”‚     â”‚  â”‚  â””â”€â”€ anomaly_model.py<br>â”‚     â”‚  â””â”€â”€ explainability.py<br>â”‚     â””â”€â”€ tests\<br>â”‚        â”œâ”€â”€ <strong>init</strong>.py<br>â”‚        â”œâ”€â”€ conftest.py<br>â”‚        â”œâ”€â”€ test_progressive.py<br>â”‚        â”œâ”€â”€ test_ter.py<br>â”‚        â”œâ”€â”€ test_dtp.py<br>â”‚        â””â”€â”€ test_export.py<br>â”œâ”€â”€ scripts\<br>â”‚  â”œâ”€â”€ run_local.bat<br>â”‚  â”œâ”€â”€ migrate_rules.bat<br>â”‚  â””â”€â”€ generate_fixture.py<br>â”œâ”€â”€ examples\<br>â”‚  â”œâ”€â”€ sample_payroll.csv<br>â”‚  â”œâ”€â”€ sample_payroll.xlsx<br>â”‚  â””â”€â”€ sample_bukti_manifest.json<br>â”œâ”€â”€ docs\<br>â”‚  â”œâ”€â”€ architecture.md<br>â”‚  â”œâ”€â”€ operations.md<br>â”‚  â”œâ”€â”€ api.md<br>â”‚  â””â”€â”€ rules_update_guide.md<br>â”œâ”€â”€ deployments\<br>â”‚  â”œâ”€â”€ docker\<br>â”‚  â”‚  â”œâ”€â”€ Dockerfile<br>â”‚  â”‚  â””â”€â”€ docker-compose.yml<br>â”‚  â”œâ”€â”€ k8s\<br>â”‚  â”‚  â”œâ”€â”€ deployment.yaml<br>â”‚  â”‚  â”œâ”€â”€ service.yaml<br>â”‚  â”‚  â””â”€â”€ secrets.example.yaml<br>â”‚  â””â”€â”€ helm\<br>â”‚     â””â”€â”€ Chart.yaml<br>â”œâ”€â”€ ci\<br>â”‚  â”œâ”€â”€ actions.yaml<br>â”‚  â””â”€â”€ pre-commit-config.yaml<br>â””â”€â”€ data\<br>   â”œâ”€â”€ fixtures\<br>   â”‚  â”œâ”€â”€ golden_case_1.json<br>   â”‚  â””â”€â”€ golden_case_2.json<br>   â””â”€â”€ archives\<br>      â””â”€â”€ README.md </td></tr><tr><td data-label="PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1"> ğŸ“¦ <strong>config/</strong><br><br>Centralized configuration and versioned rule files:<br>â€¢ <b>settings.py</b> â€“ typed loader (env + file) for runtime parameters.<br>â€¢ <b>default_rules/</b> â€“ canonical rule files (PTKP, progressive brackets, DTP) used by the rules engine.<br>â€¢ <b>rules_migrations/</b> â€“ migration notes and scripts for rule updates.<br>â€¢ <b>schema/rule_schema.json</b> â€“ JSON schema for validating rule files. </td></tr><tr><td data-label="PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1"> ğŸ§° <strong>src/pph21_v1/utils/</strong><br><br>Infrastructure helpers reused from your PTT codebase:<br>â€¢ <b>file_ops.py</b> â€“ atomic write/read, deterministic filenames, safe temp-swaps.<br>â€¢ <b>paths.py</b> â€“ normalized safe joins and path sanitizers.<br>â€¢ <b>imports.py</b> â€“ lazy/fallback imports for optional heavy libs.<br>â€¢ <b>log.py</b> â€“ structured logging with batch/request IDs.<br>â€¢ <b>crypto.py</b> â€“ checksum and manifest helpers. </td></tr><tr><td data-label="PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1"> ğŸ“¥ <strong>src/pph21_v1/io/</strong><br><br>Input parsing and validation:<br>â€¢ <b>parsers.py</b> â€“ CSV/Excel/markdown parsers and schema mapping.<br>â€¢ <b>csv_mapper.py</b> â€“ client CSV â†’ canonical record mapping.<br>â€¢ <b>excel_reader.py</b> â€“ robust Excel ingestion (sheets, types).<br>â€¢ <b>validators.py</b> â€“ NPWP/PTKP/component validation rules. </td></tr><tr><td data-label="PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1"> âš–ï¸ <strong>src/pph21_v1/rules/</strong><br><br>Domain tax logic (data-driven):<br>â€¢ <b>progressive.py</b> â€“ annual progressive calculator.<br>â€¢ <b>ter.py</b> â€“ TER monthly withholding implementation.<br>â€¢ <b>ptkp.py</b> â€“ PTKP determination and exemptions.<br>â€¢ <b>dtp_engine.py</b> â€“ PMK/DTP eligibility evaluator (reads rule files). </td></tr><tr><td data-label="PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1"> ğŸ“¤ <strong>src/pph21_v1/export/</strong><br><br>Report & file generation (atomic, schema-validated):<br>â€¢ <b>bukti_potong_csv.py</b> â€“ CSV bukti potong generator.<br>â€¢ <b>bukti_potong_xml.py</b> â€“ XML output per PER-11 schema (validator hook).<br>â€¢ <b>spt_masa_prefill.py</b> â€“ SPT Masa prefill export.<br>â€¢ <b>manifest.py</b> â€“ bundle manifests, checksums, rule-version tags. </td></tr><tr><td data-label="PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1"> ğŸ›¡ï¸ <strong>src/pph21_v1/audit/</strong><br><br>Audit trail and retention:<br>â€¢ <b>recorder.py</b> â€“ append-only audit entries for each calculation/export.<br>â€¢ <b>auditor.py</b> â€“ verification checks and evidence bundling.<br>â€¢ <b>retention.py</b> â€“ retention/rotation policies and secure deletion helpers. </td></tr><tr><td data-label="PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1"> ğŸ” <strong>src/pph21_v1/reconcile/</strong><br><br>Reconciliation & exceptions:<br>â€¢ <b>recon_service.py</b> â€“ reconcile internal withholdings vs SPT Masa/DJP responses.<br>â€¢ <b>exception_queue.py</b> â€“ queue of exceptions with suggested automated fixes and approval metadata. </td></tr><tr><td data-label="PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1"> ğŸ”Œ <strong>src/pph21_v1/integrations/</strong><br><br>Adapters for payroll systems and connectors:<br>â€¢ <b>adapter_base.py</b> â€“ adapter interface and helpers.<br>â€¢ <b>csv_adapter.py</b> â€“ generic CSV connector.<br>â€¢ <b>sap_adapter.py</b> â€“ SAP integration scaffold.<br>â€¢ <b>workday_adapter.py</b> â€“ Workday integration scaffold. </td></tr><tr><td data-label="PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1"> ğŸŒ <strong>src/pph21_v1/api/</strong><br><br>Service layer and routes:<br>â€¢ <b>server.py</b> â€“ FastAPI app factory.<br>â€¢ <b>routes/</b> â€“ health, upload, simulate, export endpoints.<br>â€¢ <b>auth.py</b> â€“ token-based auth and rate-limiting. </td></tr><tr><td data-label="PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1"> ğŸ¤– <strong>src/pph21_v1/ml/</strong><br><br>Optional ML for anomaly detection (isolated):<br>â€¢ <b>pipeline.py</b> â€“ ETL & model orchestration.<br>â€¢ <b>models/anomaly_model.py</b> â€“ trained model interface.<br>â€¢ <b>explainability.py</b> â€“ SHAP-like explain outputs for alerts. </td></tr><tr><td data-label="PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1"> ğŸ§ª <strong>src/pph21_v1/tests/</strong><br><br>Test coverage and golden cases:<br>â€¢ unit tests for progressive/TER/ DTP logic.<br>â€¢ export/golden fixtures used for schema validation and CI. </td></tr><tr><td data-label="PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1"> ğŸ› ï¸ <strong>scripts/</strong>, <strong>examples/</strong>, <strong>docs/</strong>, <strong>deployments/</strong>, <strong>ci/</strong>, <strong>data/</strong><br><br>Operational tooling and examples:<br>â€¢ <b>scripts/</b> â€“ run_local.bat, migrate_rules.bat, fixture generators.<br>â€¢ <b>examples/</b> â€“ sample_payroll.csv/xlsx and manifest examples.<br>â€¢ <b>docs/</b> â€“ architecture, operations runbook, API and rules update guide.<br>â€¢ <b>deployments/</b> â€“ Docker, Kubernetes, and Helm manifests.<br>â€¢ <b>ci/</b> â€“ actions.yaml and pre-commit config.<br>â€¢ <b>data/</b> â€“ golden fixture cases and archived exports. </td></tr><tr><td data-label="PROJECT STRUCTURE â€” D:\Dropbox\Projects\pph21_v1"> ğŸ§­ <strong>Functional summary</strong><br><br>Single repository that separates: infrastructure & safety utilities (atomic I/O, path sanitizers, lazy imports), canonical parsers, data-driven tax rules, DTP eligibility & policy engine, export & reconciliation pipelines, append-only audit trails, pluginized integrations, and optional ML anomaly detection. Rule files are versioned under <code>config/default_rules</code> so legal updates do not require code changes; all exports are produced atomically with manifests and rule-version evidence. </td></tr></tbody></table></div><div class="row-count">Rows: 14</div></div><div class="table-caption" id="Table2" data-table="Docu_0133_02" style="margin-top:2mm;margin-left:3mm;"><strong>Table 2</strong></div>
<div class="table-wrapper" data-table-id="table-2"><div class="table-heading-bar" aria-label="Table heading"></div><div class="table-container"><div class="table-header-wrapper" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;"><div class="copy-buttons"><button type="button" class="copy-plain-btn" data-action="copy-plain" onclick="copyTablePlain(this)">Copy Plain Table</button><button type="button" class="copy-markdown-btn" data-action="copy-markdown" onclick="copyTableMarkdown(this)">Copy Markdown Table</button><button type="button" class="export-csv-btn" data-action="export-csv" onclick="exportTableCSV(this)">Export CSV</button><button type="button" class="export-json-btn" data-action="export-json" onclick="exportTableJSON(this)">Export JSON</button><button type="button" class="export-xlsx-btn" data-action="export-xlsx" onclick="exportTableXLSX(this)">Export XLSX</button><button type="button" class="export-pdf-btn" data-action="export-pdf" onclick="exportTablePDF(this)">Export PDF</button><button type="button" class="export-markdown-btn export-markdown-initial" data-action="export-markdown" onclick="exportTableMarkdown(this)" style="display:none" data-initial-hidden="1">Export Markdown</button></div><div style="display:flex; align-items:center;"><button type="button" class="toggle-table-btn" data-action="toggle-collapse" onclick="toggleTable(this)">Collapse Table</button></div></div><table class="tv-table" role="table"><thead><tr><th class="tv-col-left" role="button" aria-label="Sort by **Topic**"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;"><strong>Topic</strong></div><button class="sort-btn sort-state-0" title="Toggle sort" aria-label="Toggle sort"><span class="sort-icon" aria-hidden="true"></span></button></div></th><th class="tv-col" role="button" aria-label="Sort by **Content**"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;"><strong>Content</strong></div><button class="sort-btn sort-state-0" title="Toggle sort" aria-label="Toggle sort"><span class="sort-icon" aria-hidden="true"></span></button></div></th></tr></thead><tbody><tr><td data-label="Topic"> <strong>Major Regulatory Items (2025)</strong>               </td><td data-label="Content"> PMK 10/2025: PPh 21 DTP incentives; eligibility rules; technical terms. PMK 72/2025: operational guidance incl. thresholds (e.g., Rp10M), timing, sector rules. PER-11/PJ/2025: updated bukti potong format, correction/void rules. </td></tr><tr><td data-label="Topic"> <strong>Calculation Schemes</strong>                         </td><td data-label="Content"> Two schemes: <br>(1) Progressive Pasal 17 (annualized). <br>(2) TER (Tarif Efektif Rata-rata) for monthly/daily withholding. <br> Built on PP 58/2023. <br> Payroll must support both.                                                                </td></tr><tr><td data-label="Topic"> <strong>Reporting & Compliance</strong>                      </td><td data-label="Content"> SPT Masa PPh 21/26 required; follow new bukti potong formatting; correction/cancellation procedures; ensure electronic submission and reconciliation.                                                                               </td></tr><tr><td data-label="Topic"> <strong>Practical Implications for Payroll Software</strong> </td><td data-label="Content"> Detect DTP-eligible employees; apply TER vs progressive correctly; generate updated bukti potong; support correction/void flows; provide documentation for audits.                                                                  </td></tr></tbody></table></div><div class="row-count">Rows: 4</div></div><div class="table-caption" id="Table3" data-table="Docu_0133_03" style="margin-top:2mm;margin-left:3mm;"><strong>Table 3</strong></div>
<div class="table-wrapper" data-table-id="table-3"><div class="table-heading-bar" aria-label="Table heading"></div><div class="table-container"><div class="table-header-wrapper" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;"><div class="copy-buttons"><button type="button" class="copy-plain-btn" data-action="copy-plain" onclick="copyTablePlain(this)">Copy Plain Table</button><button type="button" class="copy-markdown-btn" data-action="copy-markdown" onclick="copyTableMarkdown(this)">Copy Markdown Table</button><button type="button" class="export-csv-btn" data-action="export-csv" onclick="exportTableCSV(this)">Export CSV</button><button type="button" class="export-json-btn" data-action="export-json" onclick="exportTableJSON(this)">Export JSON</button><button type="button" class="export-xlsx-btn" data-action="export-xlsx" onclick="exportTableXLSX(this)">Export XLSX</button><button type="button" class="export-pdf-btn" data-action="export-pdf" onclick="exportTablePDF(this)">Export PDF</button><button type="button" class="export-markdown-btn export-markdown-initial" data-action="export-markdown" onclick="exportTableMarkdown(this)" style="display:none" data-initial-hidden="1">Export Markdown</button></div><div style="display:flex; align-items:center;"><button type="button" class="toggle-table-btn" data-action="toggle-collapse" onclick="toggleTable(this)">Collapse Table</button></div></div><table class="tv-table" role="table"><thead><tr><th class="tv-col-left" role="button" aria-label="Sort by **Project**"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;"><strong>Project</strong></div><button class="sort-btn sort-state-0" title="Toggle sort" aria-label="Toggle sort"><span class="sort-icon" aria-hidden="true"></span></button></div></th><th class="tv-col" role="button" aria-label="Sort by **Summary**"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;"><strong>Summary</strong></div><button class="sort-btn sort-state-0" title="Toggle sort" aria-label="Toggle sort"><span class="sort-icon" aria-hidden="true"></span></button></div></th></tr></thead><tbody><tr><td data-label="Project"> <strong>Project 1 â€” Payroll Compliance Engine (PPh21-Guard)</strong> </td><td data-label="Summary"> Python rules engine for TER/progressive, DTP eligibility, bukti potong generator, reconciliation, audit logs, correction workflow. Backend: FastAPI + PostgreSQL. Outputs: withholding results, bukti potong CSV/XML, SPT Masa files. </td></tr><tr><td data-label="Project"> <strong>Project 1 â€” Inputs & Outputs</strong>                        </td><td data-label="Summary"> Inputs: employee master data, income components, employer sector flags, YTD tax. Outputs: tax amounts, bukti potong, exception reports.                                                                                               </td></tr><tr><td data-label="Project"> <strong>Project 1 â€” Roadmap</strong>                                 </td><td data-label="Summary">MVP: TER + progressive + CSV I/O + bukti potong CSV. <br> v1: full DTP rules, corrections, reconciliation, audit logs. <br> v2: DJP API integration + multi-company support.                                                                    </td></tr><tr><td data-label="Project"> <strong>Project 1 â€” Compliance Notes</strong>                        </td><td data-label="Summary"> Encrypt NPWP/payroll data; logs must not contain sensitive info; provide audit trail.                                                                                                                                                 </td></tr></tbody></table></div><div class="row-count">Rows: 4</div></div><div class="table-caption" id="Table4" data-table="Docu_0133_04" style="margin-top:2mm;margin-left:3mm;"><strong>Table 4</strong></div>
<div class="table-wrapper" data-table-id="table-4"><div class="table-heading-bar" aria-label="Table heading"></div><div class="table-container"><div class="table-header-wrapper" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;"><div class="copy-buttons"><button type="button" class="copy-plain-btn" data-action="copy-plain" onclick="copyTablePlain(this)">Copy Plain Table</button><button type="button" class="copy-markdown-btn" data-action="copy-markdown" onclick="copyTableMarkdown(this)">Copy Markdown Table</button><button type="button" class="export-csv-btn" data-action="export-csv" onclick="exportTableCSV(this)">Export CSV</button><button type="button" class="export-json-btn" data-action="export-json" onclick="exportTableJSON(this)">Export JSON</button><button type="button" class="export-xlsx-btn" data-action="export-xlsx" onclick="exportTableXLSX(this)">Export XLSX</button><button type="button" class="export-pdf-btn" data-action="export-pdf" onclick="exportTablePDF(this)">Export PDF</button><button type="button" class="export-markdown-btn export-markdown-initial" data-action="export-markdown" onclick="exportTableMarkdown(this)" style="display:none" data-initial-hidden="1">Export Markdown</button></div><div style="display:flex; align-items:center;"><button type="button" class="toggle-table-btn" data-action="toggle-collapse" onclick="toggleTable(this)">Collapse Table</button></div></div><table class="tv-table" role="table"><thead><tr><th class="tv-col-left" role="button" aria-label="Sort by Explanation"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Explanation</div><button class="sort-btn sort-state-0" title="Toggle sort" aria-label="Toggle sort"><span class="sort-icon" aria-hidden="true"></span></button></div></th></tr></thead><tbody><tr><td data-label="Explanation"> <strong>Configuration layer</strong>                                                                                                                                                                                                                                                                                                                     </td></tr><tr><td data-label="Explanation"> Centralized loader for environment and file-based settings (progressive brackets, TER params, DTP thresholds, output paths, feature flags). Provide defaults, validation, and runtime overrides. Export a typed <code>Settings</code> object and support versioned rule files (JSON/YAML) with a migration path for regulatory updates.                </td></tr><tr><td data-label="Explanation"> <strong>File safety & atomicity utilities</strong>                                                                                                                                                                                                                                                                                                       </td></tr><tr><td data-label="Explanation"> Safe path sanitization, normalized per-period output directories, and atomic write/read wrappers (temp-write â†’ rename). Enforce deterministic filenames (hash/UUID), permissions, and retry/backoff for transient I/O failures. Include unit tests for partial/interrupted writes and permission edge cases.                                </td></tr><tr><td data-label="Explanation"> <strong>Dependency & import management</strong>                                                                                                                                                                                                                                                                                                          </td></tr><tr><td data-label="Explanation"> Lazy/fallback import helpers so optional heavy libs (pandas, lxml, cvxpy) load only when features are enabled. Surface clear runtime errors that state which packages to install. Enable lightweight deployments and air-gapped on-prem installs via feature flags.                                                                         </td></tr><tr><td data-label="Explanation"> <strong>Structured logging & audit context</strong>                                                                                                                                                                                                                                                                                                      </td></tr><tr><td data-label="Explanation"> Logging wrapper that attaches batch IDs, request IDs, timestamps, and operator IDs. Capture rule decisions (matched rule, input snapshot hash, output delta) while avoiding PII leaks. Provide separate audit appenders (local encrypted files and optional remote syslog) and implement rotation/retention policies.                       </td></tr><tr><td data-label="Explanation"> <strong>Input parsing & normalization</strong>                                                                                                                                                                                                                                                                                                           </td></tr><tr><td data-label="Explanation"> Robust parsers for CSV, Excel, and markdown/table inputs with schema mapping and column heuristics. Validate and normalize employee records (NPWP format, PTKP markers, component names) into a canonical record format used by calculators. Support parser plugins for custom client formats.                                              </td></tr><tr><td data-label="Explanation"> <strong>Core tax rules modules (domain code)</strong>                                                                                                                                                                                                                                                                                                    </td></tr><tr><td data-label="Explanation"> Pure, well-tested implementations of TER monthly withholding, progressive annual calculator, PTKP handling, and PMK/DTP logic. Keep rule logic data-driven (brackets, thresholds) separated from code so legal teams can update rule files without code changes. Include exhaustive unit tests and golden fixtures.                         </td></tr><tr><td data-label="Explanation"> <strong>DTP evaluation & policy engine</strong>                                                                                                                                                                                                                                                                                                          </td></tr><tr><td data-label="Explanation"> Rule evaluator that accepts employee+employer context and outputs eligibility decisions with rationale and confidence. Support chained rules, overrides, and an auditable checklist of checks performed. Include human-review flags and manual-override workflows with approval history.                                                    </td></tr><tr><td data-label="Explanation"> <strong>Export & report generation</strong>                                                                                                                                                                                                                                                                                                              </td></tr><tr><td data-label="Explanation"> Generators for bukti potong in required formats (CSV and XML per PER-11), SPT Masa prefill files, and correction/void documents. Use atomic writes and schema validators. Produce checksumable bundles and metadata manifests (who generated it, rule-file version, timestamp).                                                             </td></tr><tr><td data-label="Explanation"> <strong>Reconciliation & exception flow</strong>                                                                                                                                                                                                                                                                                                         </td></tr><tr><td data-label="Explanation"> Modules to reconcile withheld totals against SPT Masa records and DJP responses. Produce exception reports (mismatches, missing bukti potong, duplicated NPWP). Maintain an exceptions queue with automated suggested fixes and an approval workflow for applying corrections.                                                              </td></tr><tr><td data-label="Explanation"> <strong>API & integration adapters</strong>                                                                                                                                                                                                                                                                                                              </td></tr><tr><td data-label="Explanation"> Thin service layer (FastAPI) exposing endpoints for batch upload, single-employee simulation, eligibility checks, and export retrieval. Provide OpenAPI spec, token-based auth, rate limiting, and webhooks for events. Pluginized adapters for common payroll systems (CSV schemas, SAP/Workday/ADP connectors).                           </td></tr><tr><td data-label="Explanation"> <strong>ML / anomaly detection (optional)</strong>                                                                                                                                                                                                                                                                                                       </td></tr><tr><td data-label="Explanation"> Isolated pipeline for historical analysis and anomaly detection (isolation forest / time-series models). Keep ML artifacts separate; surface only high-confidence alerts to humans. Ensure training data stays in secured storage and provide explainability summaries for each alert.                                                      </td></tr><tr><td data-label="Explanation"> <strong>Tests, docs & deployment</strong>                                                                                                                                                                                                                                                                                                                </td></tr><tr><td data-label="Explanation"> Full test suite (unit, integration, golden-file fixtures for regulatory cases), CI for linting and rule-file validation, and operational runbooks for config, secret management, and incident response. Include Docker manifests and optional Helm chart plus a compliance checklist (encryption at rest, key management, access controls). </td></tr></tbody></table></div><div class="row-count">Rows: 24</div></div><div class="table-caption" id="Table5" data-table="Docu_0133_05" style="margin-top:2mm;margin-left:3mm;"><strong>Table 5</strong></div>
<div class="table-wrapper" data-table-id="table-5"><div class="table-heading-bar" aria-label="Table heading"></div><div class="table-container"><div class="table-header-wrapper" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;"><div class="copy-buttons"><button type="button" class="copy-plain-btn" data-action="copy-plain" onclick="copyTablePlain(this)">Copy Plain Table</button><button type="button" class="copy-markdown-btn" data-action="copy-markdown" onclick="copyTableMarkdown(this)">Copy Markdown Table</button><button type="button" class="export-csv-btn" data-action="export-csv" onclick="exportTableCSV(this)">Export CSV</button><button type="button" class="export-json-btn" data-action="export-json" onclick="exportTableJSON(this)">Export JSON</button><button type="button" class="export-xlsx-btn" data-action="export-xlsx" onclick="exportTableXLSX(this)">Export XLSX</button><button type="button" class="export-pdf-btn" data-action="export-pdf" onclick="exportTablePDF(this)">Export PDF</button><button type="button" class="export-markdown-btn export-markdown-initial" data-action="export-markdown" onclick="exportTableMarkdown(this)" style="display:none" data-initial-hidden="1">Export Markdown</button></div><div style="display:flex; align-items:center;"><button type="button" class="toggle-table-btn" data-action="toggle-collapse" onclick="toggleTable(this)">Collapse Table</button></div></div><table class="tv-table" role="table"><thead><tr><th class="tv-col-left" role="button" aria-label="Sort by Responsibilities / who owns it"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Responsibilities / who owns it</div><button class="sort-btn sort-state-0" title="Toggle sort" aria-label="Toggle sort"><span class="sort-icon" aria-hidden="true"></span></button></div></th><th class="tv-col" role="button" aria-label="Sort by Component â€” Conceptual overview"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Component â€” Conceptual overview</div><button class="sort-btn sort-state-0" title="Toggle sort" aria-label="Toggle sort"><span class="sort-icon" aria-hidden="true"></span></button></div></th><th class="tv-col" role="button" aria-label="Sort by Key artifacts / examples"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Key artifacts / examples</div><button class="sort-btn sort-state-0" title="Toggle sort" aria-label="Toggle sort"><span class="sort-icon" aria-hidden="true"></span></button></div></th></tr></thead><tbody><tr><td data-label="Responsibilities / who owns it">          Product / Engineering </td><td data-label="Component â€” Conceptual overview"> <strong>Purpose & scope</strong> â€” A focused, auditable payroll tax (PPh21) calculation and reconciliation service that consumes payroll inputs (CSV/Excel/adapter feeds), applies data-driven rule sets (PTKP, progressive brackets, TER, DTP), produces withholding outputs and regulatory exports (bukti potong, SPT Masa prefill), and provides reconciliation, exception handling, and human-review workflows. Designed for on-prem or cloud deployment with strict privacy controls. </td><td data-label="Key artifacts / examples"> Product spec, compliance checklist, stakeholder sign-off document                            </td></tr><tr><td data-label="Responsibilities / who owns it">        Platform / Config owner </td><td data-label="Component â€” Conceptual overview"> <strong>Configuration layer</strong> â€” Centralized, typed settings and rule-file registry with schema validation, semantic versioning, migration harness and CI gating. Supports environment overrides, encrypted secrets, feature flags, and runtime toggles. Configuration is the single source-of-truth for rule versions used in a run.                                                                                                                                                </td><td data-label="Key artifacts / examples"> <code>config/settings.py</code>, <code>config/schema/rule_schema.json</code>, migration scripts, CI validation job </td></tr><tr><td data-label="Responsibilities / who owns it">                     Rules team </td><td data-label="Component â€” Conceptual overview"> <strong>Settings & rule-file versioning</strong> â€” Each rule-file carries <code>version</code>, <code>effective_date</code>, <code>author</code>, <code>changelog</code> and <code>compatibility</code> fields. CI enforces that only validated rule versions are deployable; migrations provide deterministic apply/rollback; authoring UI allows preview/dry-run.                                                                                                                                                                               </td><td data-label="Key artifacts / examples"> <code>default_rules/*.yml</code>, <code>rules_migrations/*</code>, migration test harness                          </td></tr><tr><td data-label="Responsibilities / who owns it">                 Security / Ops </td><td data-label="Component â€” Conceptual overview"> <strong>Secrets & KMS</strong> â€” Envelope encryption for secrets (KMS-backed), automated key rotation, runtime secret caching with minimum TTL, and secret access audit trail. <code>.env</code> files are examples only; production uses KMS/SOPS.                                                                                                                                                                                                                                                   </td><td data-label="Key artifacts / examples"> <code>security/kms_client.py</code>, <code>ops/sops/*.yaml</code>, rotation playbook                               </td></tr><tr><td data-label="Responsibilities / who owns it">                  Platform / IO </td><td data-label="Component â€” Conceptual overview"> <strong>File safety & atomicity utilities</strong> â€” Path sanitization, deterministic naming (UUID/hash), temp-write â†’ atomic-rename, checksum verification, file permissions enforcement, retry/backoff semantics, and cleanup policies for temp artifacts. Unit tests simulate interruptions.                                                                                                                                                                                            </td><td data-label="Key artifacts / examples"> <code>utils/file_ops.py</code>, atomic write wrappers, checksum utilities                               </td></tr><tr><td data-label="Responsibilities / who owns it">           DevOps / Engineering </td><td data-label="Component â€” Conceptual overview"> <strong>Dependency & import management</strong> â€” Lazy import helpers for optional heavy packages; offline bundle builder (.whl + hashes) for air-gapped installs; build-time license checks; runtime error messages that point to exact missing packages and install commands.                                                                                                                                                                                                            </td><td data-label="Key artifacts / examples"> <code>utils/imports.py</code>, <code>third_party/allowed_licenses.txt</code>, offline bundle scripts               </td></tr><tr><td data-label="Responsibilities / who owns it">               Integration / IO </td><td data-label="Component â€” Conceptual overview"> <strong>Input parsing & normalization</strong> â€” Schema registry + parser plugins (CSV, Excel, custom adapters). Canonical employee record produced for downstream modules. Includes heuristics for noisy inputs, coercion rules, type coercion and provenance metadata (original row, parser-version).                                                                                                                                                                                    </td><td data-label="Key artifacts / examples"> <code>io/parsers.py</code>, <code>io/schema_registry.py</code>, sample mapping configs                             </td></tr><tr><td data-label="Responsibilities / who owns it">                    Engineering </td><td data-label="Component â€” Conceptual overview"> <strong>Canonical data model</strong> â€” Standardized internal model for <code>Employee</code>, <code>Employer</code>, <code>Compensation</code>, <code>Deduction</code>, <code>Period</code>, <code>RuleVersion</code>, and <code>RunMetadata</code>. All modules operate on canonical objects. Models include provenance metadata (input-hash, parser-version).                                                                                                                                                                                                        </td><td data-label="Key artifacts / examples"> Data model docs, Python dataclasses/models                                                   </td></tr><tr><td data-label="Responsibilities / who owns it">            Rules / Engineering </td><td data-label="Component â€” Conceptual overview"> <strong>Core tax rules modules (domain code)</strong> â€” Data-driven, pure implementations of progressive tax, PTKP, biaya jabatan, pension deductions, TER, and DTP logic. Rules read from versioned YAML/JSON and are isolated from engine so legal teams can update files without code changes.                                                                                                                                                                                          </td><td data-label="Key artifacts / examples"> <code>rules/progressive.py</code>, <code>rules/ptkp.py</code>, <code>config/default_rules/*</code>                            </td></tr><tr><td data-label="Responsibilities / who owns it">            Engineering / Rules </td><td data-label="Component â€” Conceptual overview"> <strong>Policy & evaluation engine</strong> â€” Policy engine that accepts canonical context and returns decisions: tax amounts, eligibility, rationale, confidence score, and matched rule-ids. Supports chained rules, overrides, sandbox/dry-run mode and explainability payloads for human review.                                                                                                                                                                                       </td><td data-label="Key artifacts / examples"> <code>policy_engine/evaluator.py</code>, explainability payload schema                                  </td></tr><tr><td data-label="Responsibilities / who owns it">                  Rules / Legal </td><td data-label="Component â€” Conceptual overview"> <strong>DTP & TER engines</strong> â€” Specialized modules with auditable logic paths for DTP (tax credit / allowance) and TER/gross-up calculations. Implement testable reference cases and allow toggles for applying legacy vs. PMK rules.                                                                                                                                                                                                                                                </td><td data-label="Key artifacts / examples"> <code>rules/dtp_engine.py</code>, <code>rules/ter.py</code>, golden fixtures                                       </td></tr><tr><td data-label="Responsibilities / who owns it">          Product / Engineering </td><td data-label="Component â€” Conceptual overview"> <strong>Export & report generation</strong> â€” Atomic export generation for bukti potong (CSV & PER-11 XML), SPT Masa prefill, correction/void files, and signed export bundles (manifest + checksums). Exports include generator metadata (code-version, rule-version, signer).                                                                                                                                                                                                            </td><td data-label="Key artifacts / examples"> <code>export/bukti_potong_xml.py</code>, <code>export/manifest.py</code>, contract test suite                      </td></tr><tr><td data-label="Responsibilities / who owns it">              QA / Integrations </td><td data-label="Component â€” Conceptual overview"> <strong>Consumer contract tests (export)</strong> â€” Consumer-driven contract tests (e.g., PER-11 consumers) that run in CI to ensure exports remain compatible with downstream systems.                                                                                                                                                                                                                                                                                                    </td><td data-label="Key artifacts / examples"> <code>export/per11_contract_tests.py</code>, CI job <code>run_contract_tests.sh</code>                             </td></tr><tr><td data-label="Responsibilities / who owns it">                  Finance / Ops </td><td data-label="Component â€” Conceptual overview"> <strong>Reconciliation & exception flow</strong> â€” Reconciliation runner compares withheld totals vs SPT Masa/DJP responses and employer records. Exceptions are queued with root-cause, suggested remediation, risk score, and approval workflow. Supports automated fixes for low-risk exceptions.                                                                                                                                                                                       </td><td data-label="Key artifacts / examples"> <code>reconcile/recon_service.py</code>, <code>reconcile/exception_queue.py</code>                                 </td></tr><tr><td data-label="Responsibilities / who owns it">          Security / Compliance </td><td data-label="Component â€” Conceptual overview"> <strong>Audit, logging & immutable store</strong> â€” Structured JSON logs enriched with <code>batch_id</code>, <code>request_id</code>, <code>rule_version</code>, <code>input_hash</code>, and redaction for PII. Append-only immutable store for audit records (local encrypted files or remote append-only store). Log redaction rules and PII-scan on CI.                                                                                                                                                                           </td><td data-label="Key artifacts / examples"> <code>audit/recorder.py</code>, <code>audit/append_only_store.py</code>, log schema                                </td></tr><tr><td data-label="Responsibilities / who owns it">                      SRE / Ops </td><td data-label="Component â€” Conceptual overview"> <strong>Observability & SLOs</strong> â€” Prometheus metrics, OpenTelemetry traces, Grafana dashboards. Defined SLIs/SLOs for batch completion time, API latency, reconciliation latency, and error rates. Alerting playbooks and on-call runbooks for SLO breaches.                                                                                                                                                                                                                         </td><td data-label="Key artifacts / examples"> <code>observability/metrics.py</code>, SLO doc, dashboards                                              </td></tr><tr><td data-label="Responsibilities / who owns it">             API / Integrations </td><td data-label="Component â€” Conceptual overview"> <strong>API & integration adapters</strong> â€” Thin FastAPI layer exposing endpoints for batch upload, single-employee simulation, rule-version listing, and export retrieval. Token-based auth, rate-limiting, webhook support. Adapter plugin pattern for CSV, SAP, Workday, ADP.                                                                                                                                                                                                         </td><td data-label="Key artifacts / examples"> <code>api/server.py</code>, <code>integrations/*_adapter.py</code>, OpenAPI spec                                   </td></tr><tr><td data-label="Responsibilities / who owns it">              QA / Integrations </td><td data-label="Component â€” Conceptual overview"> <strong>Adapters contract tests</strong> â€” Per-adapter contract tests to validate mapping correctness and resilience to schema drift. Runs in CI against adapter fixtures and sample partner payloads.                                                                                                                                                                                                                                                                                     </td><td data-label="Key artifacts / examples"> <code>integrations/contract_tests</code>, CI hook                                                       </td></tr><tr><td data-label="Responsibilities / who owns it">             Data Science / Ops </td><td data-label="Component â€” Conceptual overview"> <strong>ML / anomaly detection (optional)</strong> â€” Isolated pipeline for anomaly detection (isolation forest, time-series), training data governance, model cards, explainability, and human-in-loop confirmation. Only surface high-confidence alerts in UI.                                                                                                                                                                                                                            </td><td data-label="Key artifacts / examples"> <code>ml/pipeline.py</code>, model-card templates, explainability outputs                               </td></tr><tr><td data-label="Responsibilities / who owns it">               QA / Engineering </td><td data-label="Component â€” Conceptual overview"> <strong>Tests & golden fixtures</strong> â€” Unit tests for each ruleset, integration tests for end-to-end flows, golden-file fixtures for regulatory scenarios, performance tests, and fuzz tests for parsers. CI gates deploys on passing suites.                                                                                                                                                                                                                                          </td><td data-label="Key artifacts / examples"> <code>tests/</code>, <code>data/fixtures/golden_case_*.json</code>, CI yaml                                        </td></tr><tr><td data-label="Responsibilities / who owns it">               CI / Engineering </td><td data-label="Component â€” Conceptual overview"> <strong>CI / gating & golden-file checks</strong> â€” CI includes linting, rules schema validation, golden-file diffs for rule changes, contract tests, performance smoke, and security scans (dependency vulnerabilities, secret-scan).                                                                                                                                                                                                                                                     </td><td data-label="Key artifacts / examples"> <code>ci/github-actions.yaml</code>, <code>ci-scripts/run_golden_checks.sh</code>                                  </td></tr><tr><td data-label="Responsibilities / who owns it">              SRE / Engineering </td><td data-label="Component â€” Conceptual overview"> <strong>Performance, scalability & cost controls</strong> â€” Batch partitioning for large payrolls, parallel workers, autoscaling policies, job queue sizing, and cost monitoring. Load test matrix by payroll size and SLA targets.                                                                                                                                                                                                                                                        </td><td data-label="Key artifacts / examples"> <code>jobs/batch_processor.py</code>, <code>scripts/perf_load_test.sh</code>                                       </td></tr><tr><td data-label="Responsibilities / who owns it">                         DevOps </td><td data-label="Component â€” Conceptual overview"> <strong>Deployment & infra patterns</strong> â€” Docker images, k8s manifests (deployments, HPA, CronJobs), Terraform for infra, Helm chart for templated installs. Canary or blue-green deploy patterns recommended for rule updates.                                                                                                                                                                                                                                                       </td><td data-label="Key artifacts / examples"> <code>deployments/</code>, <code>infra/terraform</code>, <code>helm/</code>                                                   </td></tr><tr><td data-label="Responsibilities / who owns it">                            Ops </td><td data-label="Component â€” Conceptual overview"> <strong>Backup, DR & business continuity</strong> â€” Daily encrypted backups, RTO/RPO targets, recovery drills, failover checklist, and backup integrity verification. Runbooks for recovery and data restore tests during DR drills.                                                                                                                                                                                                                                                       </td><td data-label="Key artifacts / examples"> <code>ops/backups/backup_policy.md</code>, <code>jobs/backup_restore.py</code>                                     </td></tr><tr><td data-label="Responsibilities / who owns it">               Security / Legal </td><td data-label="Component â€” Conceptual overview"> <strong>Security & compliance</strong> â€” TLS everywhere, least-privilege IAM, dependency vulnerability scans, periodic pentests, data classification, PII minimization, consent records, and legal signoff workflow for rule changes.                                                                                                                                                                                                                                                      </td><td data-label="Key artifacts / examples"> <code>SECURITY.md</code>, <code>compliance/*</code>, pentest reports                                               </td></tr><tr><td data-label="Responsibilities / who owns it">              Compliance / Data </td><td data-label="Component â€” Conceptual overview"> <strong>Data governance & retention</strong> â€” Jurisdictional retention policies, erasure workflows, archived bundles with retention metadata, and automated purge per policy. Data residency controls per deployment.                                                                                                                                                                                                                                                                     </td><td data-label="Key artifacts / examples"> <code>docs/compliance/regulatory_mapping.md</code>, retention matrix                                    </td></tr><tr><td data-label="Responsibilities / who owns it">             Security / Product </td><td data-label="Component â€” Conceptual overview"> <strong>Privacy & PII handling</strong> â€” PII minimization by default, masked PII in logs and exports unless explicit consent, role-based access for sensitive information, and deletion workflows.                                                                                                                                                                                                                                                                                        </td><td data-label="Key artifacts / examples"> <code>security/secrets_helper.py</code>, PII policy doc                                                 </td></tr><tr><td data-label="Responsibilities / who owns it">                  Product / Ops </td><td data-label="Component â€” Conceptual overview"> <strong>RBAC & operator controls</strong> â€” Role-based actions: uploader, reviewer, auditor, admin. Approval workflow for manual overrides with immutable audit trail and approval metadata.                                                                                                                                                                                                                                                                                               </td><td data-label="Key artifacts / examples"> <code>policy_engine/overrides.py</code>, RBAC matrix                                                    </td></tr><tr><td data-label="Responsibilities / who owns it">                  Finance / Ops </td><td data-label="Component â€” Conceptual overview"> <strong>Reconciliation lifecycle (detailed)</strong> â€” 1) Ingest payroll â†’ 2) Compute per-employee with metadata â†’ 3) Produce export bundle (manifest + checksums) â†’ 4) Submit to DJP/SPT â†’ 5) Ingest responses â†’ 6) Reconcile differences â†’ 7) Generate exception tickets with suggested remediations â†’ 8) Human review â†’ 9) Apply corrections (with audit).                                                                                                                              </td><td data-label="Key artifacts / examples"> <code>reconcile/recon_service.py</code>, queues, approval UI                                            </td></tr><tr><td data-label="Responsibilities / who owns it">                  Ops / Finance </td><td data-label="Component â€” Conceptual overview"> <strong>Exception queue & remediation</strong> â€” Each exception includes error code, root-cause classification, suggested automated fix (if low-risk), risk score, SLA for resolution, and escalation path. Manual corrections require two-person approval for high-risk fix.                                                                                                                                                                                                              </td><td data-label="Key artifacts / examples"> <code>reconcile/exception_queue.py</code>, exception schema                                             </td></tr><tr><td data-label="Responsibilities / who owns it">                            Ops </td><td data-label="Component â€” Conceptual overview"> <strong>Runbooks & operational playbooks</strong> â€” On-call playbook, correction playbook, DR runbook, export incident runbook, and rule-update checklist. Include runbook for PER-11/DPJ rejection flows.                                                                                                                                                                                                                                                                                 </td><td data-label="Key artifacts / examples"> <code>docs/runbooks/*</code>                                                                            </td></tr><tr><td data-label="Responsibilities / who owns it">          Product / Engineering </td><td data-label="Component â€” Conceptual overview"> <strong>Release & migration plan</strong> â€” Versioned release for code + rule-files. Migration simulator runs historical payroll through candidate rule version and produces diff/golden report; staged rollout with canary customers and rollback process.                                                                                                                                                                                                                                </td><td data-label="Key artifacts / examples"> <code>scripts/migrate_rules.sh</code>, migration simulator                                              </td></tr><tr><td data-label="Responsibilities / who owns it">                   Integrations </td><td data-label="Component â€” Conceptual overview"> <strong>Contract & partner testing</strong> â€” Sandbox endpoints for partners, contract tests, sample payloads, and adapter health endpoints. Partners sign test reports before production onboarding.                                                                                                                                                                                                                                                                                      </td><td data-label="Key artifacts / examples"> <code>integrations/contract_tests/</code>, sandbox docs                                                 </td></tr><tr><td data-label="Responsibilities / who owns it">                    Engineering </td><td data-label="Component â€” Conceptual overview"> <strong>Developer DX & local stack</strong> â€” Local dev environment with synthetic datasets, pre-built docker-compose for dependencies, commit hooks (rule validation), and documentation for contributor workflow.                                                                                                                                                                                                                                                                        </td><td data-label="Key artifacts / examples"> <code>scripts/run_local.sh</code>, <code>docs/onboarding.md</code>                                                 </td></tr><tr><td data-label="Responsibilities / who owns it">               Legal / Security </td><td data-label="Component â€” Conceptual overview"> <strong>Third-party & vendor risk</strong> â€” Inventory of connectors and services, periodic risk assessments, allowed-services list, and data-sharing / DPA templates.                                                                                                                                                                                                                                                                                                                     </td><td data-label="Key artifacts / examples"> <code>third_party/allowed_licenses.txt</code>, vendor matrix                                            </td></tr><tr><td data-label="Responsibilities / who owns it">                      SRE / Ops </td><td data-label="Component â€” Conceptual overview"> <strong>Monitoring & alerting matrix</strong> â€” Alert on job failures, high exception rates, export validation errors, SLO breaches, and security events. Runbook-linked alerts with runbook id in alert payload.                                                                                                                                                                                                                                                                          </td><td data-label="Key artifacts / examples"> Alert rules, Grafana/Prometheus alerts                                                       </td></tr><tr><td data-label="Responsibilities / who owns it">                            SRE </td><td data-label="Component â€” Conceptual overview"> <strong>Metrics & observability knobs</strong> â€” Key metrics: <code>batches_processed</code>, <code>rows_processed</code>, <code>avg_latency_per_row</code>, <code>export_validation_failures</code>, <code>reconciliation_mismatch_rate</code>, <code>anomaly_alerts</code>, <code>error_rate</code>. Instrumented with Prometheus; traces in OpenTelemetry for root-cause analysis.                                                                                                                                                                                   </td><td data-label="Key artifacts / examples"> <code>observability/metrics.py</code>                                                                   </td></tr><tr><td data-label="Responsibilities / who owns it">                             QA </td><td data-label="Component â€” Conceptual overview"> <strong>Golden-file & acceptance tests</strong> â€” Golden fixtures for each regulatory scenario (e.g., TER case, DTP case, marital status variants). CI fails if golden diffs occur without approved rule-version bump.                                                                                                                                                                                                                                                                     </td><td data-label="Key artifacts / examples"> <code>tests/golden_fixtures/</code>                                                                     </td></tr><tr><td data-label="Responsibilities / who owns it">       Compliance / Engineering </td><td data-label="Component â€” Conceptual overview"> <strong>PER-11 / regulatory export specifics</strong> â€” Export generator adheres to PER-11 schema with contract tests. Each bundle contains manifest: <code>{generator_id, code_version, rule_version, input_hash, checksum, signer, timestamp}</code>. Support signed bundles for legal evidence.                                                                                                                                                                                                    </td><td data-label="Key artifacts / examples"> <code>export/bukti_potong_xml.py</code>, manifest format                                                </td></tr><tr><td data-label="Responsibilities / who owns it">                     Compliance </td><td data-label="Component â€” Conceptual overview"> <strong>Data lineage & provenance</strong> â€” For each output store metadata: input-hash, parser-version, rule-version, code-version, operator-id, and proof-of-generation (checksum + signer). Enables full traceability for audits.                                                                                                                                                                                                                                                       </td><td data-label="Key artifacts / examples"> Manifest, append-only audit store                                                            </td></tr><tr><td data-label="Responsibilities / who owns it">                            API </td><td data-label="Component â€” Conceptual overview"> <strong>Example API endpoints</strong> â€” <code>POST /upload</code> (multipart CSV/xlsx) â†’ returns <code>batch_id</code> and validation report; <code>GET /simulate/{employee_id}?rule_version=...</code> â†’ returns explainability payload; <code>GET /export/{batch_id}</code> â†’ download signed export bundle.                                                                                                                                                                                                                        </td><td data-label="Key artifacts / examples"> OpenAPI spec <code>api.md</code>                                                                        </td></tr><tr><td data-label="Responsibilities / who owns it">                   Integrations </td><td data-label="Component â€” Conceptual overview"> <strong>Data model sample (CSV schema)</strong> â€” Example input CSV header: <code>employee_id,name,gross_monthly,months_worked,status,dependents,pension_monthly,pph21_withheld_so_far,notes</code>. Output CSV includes audit columns and computed fields: <code>annual_gross,biaya_jabatan,pension_deduction,penghasilan_netto,ptkp,pkp,annual_tax,monthly_withholding_calc,remaining_yearly_due,manifest_id,rule_version</code>.                                                                              </td><td data-label="Key artifacts / examples"> <code>examples/sample_payroll.csv</code>                                                                </td></tr><tr><td data-label="Responsibilities / who owns it">                  Product / Ops </td><td data-label="Component â€” Conceptual overview"> <strong>Operational acceptance criteria</strong> â€”<br>1) CI passing (unit + golden + contract tests)<br>2) End-to-end sample batch produces identical results to official kalkulator for reference vectors<br>3) PER-11 contract tests green<br>4) SLOs defined and dashboards provisioned<br>5) Runbook exists for top 10 incidents                                         </td><td data-label="Key artifacts / examples"> Acceptance checklist        </td></tr><tr><td data-label="Responsibilities / who owns it">          Product / Engineering </td><td data-label="Component â€” Conceptual overview"> <strong>Roadmap & 3-phase rollout</strong> â€”<br>Phase 1 â€” Core engine, CSV batch, exports, reconciliation, CI (6â€“8 weeks)<br>Phase 2 â€” API, adapters, contract tests, observability, DR (6â€“8 weeks)<br>Phase 3 â€” TER/DTP advanced modes, ML anomaly, canary program & partner onboarding (8â€“12 weeks)<br>Each phase ends with compliance sign-off and golden-file regression </td><td data-label="Key artifacts / examples"> Roadmap doc, milestone plan </td></tr><tr><td data-label="Responsibilities / who owns it">                 SRE / Security </td><td data-label="Component â€” Conceptual overview"> <strong>Common failure modes & mitigations</strong> â€” Parser errors â†’ reject with validation report + sample row. Rule-version drift â†’ CI gate + migration simulator. Export validation failure â†’ store rejected bundle, auto-create remediation ticket. Secrets compromise â†’ immediate KMS key-rotation and audit run.                                                                                                                                                                    </td><td data-label="Key artifacts / examples"> Failure-mode matrix, runbooks                                                                </td></tr><tr><td data-label="Responsibilities / who owns it">             Compliance / Audit </td><td data-label="Component â€” Conceptual overview"> <strong>Acceptance & audit evidence</strong> â€” Bundle evidence package for auditors: sample input, generated outputs, manifest, rule-files used, code snapshot (git commit), and approval logs. Support export to secure archive for audit retention windows.                                                                                                                                                                                                                              </td><td data-label="Key artifacts / examples"> <code>compliance/evidence/</code> templates                                                             </td></tr><tr><td data-label="Responsibilities / who owns it">                  SRE / Finance </td><td data-label="Component â€” Conceptual overview"> <strong>Estimates & sizing guidance</strong> â€” For 100k employee rows per monthly run: use partitioned jobs (e.g., 100 workers), each worker memory 1â€“2GB depending on Excel parsing; use streaming parsers for CSV to bound memory. Provide load-test matrix and cost estimate per run.                                                                                                                                                                                                   </td><td data-label="Key artifacts / examples"> <code>scripts/perf_load_test.sh</code>, sizing doc                                                      </td></tr></tbody></table></div><div class="row-count">Rows: 47</div></div><script src="assets/xlsx.full.min.js?v=1758605028" defer></script>
<script src="assets/script.js?v=1759748863" defer></script>
<script src="assets/worker.js?v=1758331710" defer></script>
<script>
(function(){
  const template = "{table}_{date}";
  const userVal = "";
  const hrefPrefix = "assets";
  function formatName(tableName) {
    const date = (new Date()).toISOString().slice(0,10);
    return template.replace('{table}', tableName).replace('{date}', date).replace('{user}', userVal);
  }
  const btn = document.getElementById('exportBtn');
  if(btn) {
    btn.addEventListener('click', async function() {
      try {
        const html = document.documentElement.outerHTML;
        if(html.length > 2000000) { alert('Export refused: html too large'); return; }
        if(window.Worker) {
          const workerUrl = (function(){ try{ return hrefPrefix + '/worker.js'; }catch(e){ return null; } })();
          if(workerUrl) {
            try {
              const worker = new Worker(workerUrl);
              worker.postMessage({html: html, format: 'pdf'});
              worker.onmessage = function(e) { console.log('worker:', e.data); alert('Worker replied: '+(e.data.msg||e.data.status)); };
            } catch(err) { console.warn('Worker create failed', err); alert('Worker not available'); }
          } else { alert('Worker not available'); }
        } else { alert('Export worker not supported in this environment.'); }
      } catch(err) { console.warn('Export failed', err); alert('Export worker not available. See console for details.'); }
    });
  }
})();
window.addEventListener('load', function(){ try{ document.querySelectorAll('.table-wrapper').forEach(function(e){ e.style.opacity='1'; }); }catch(e){} });
</script>
</div>
</body>
</html>