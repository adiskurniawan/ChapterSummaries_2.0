<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'>
<title>Tables Viewer v2.1</title>
<style>:root{--main-header-height:56px;} .table-wrapper{opacity:0;min-height:24px;transition:opacity .12s linear}</style>
<link rel="stylesheet" href="assets/style.css?v=1759925496">
<link rel="stylesheet" href="assets/overrides.css?v=1764227755">
</head><body>
<div id="tables-viewer" role="region" aria-label="Tables viewer">
<div id="stickyMainHeader">
<div id="tv-header">
<div><h1>Tables Viewer v2.1</h1></div>
<div style="display:flex;gap:8px;align-items:center;">
<input id="searchBox" class="tv-search" type="search" placeholder="Search" aria-label="Search tables" />
<button id="modeBtn" type="button" onclick="toggleMode()" aria-label="Toggle theme">Theme</button>
<button id="toggleAllBtn" type="button" aria-label="Toggle all" onclick="toggleAllTables()">Collapse All Tables</button>
<button id="copyAllPlainBtn" class="copy-btn" type="button" onclick="copyAllTablesPlain()" aria-label="Copy all tables as plain text">Copy All Tables (Plain Text)</button>
<button id="copyAllTablesBtn" class="copy-all-btn" type="button" onclick="copyAllTablesMarkdown()" aria-label="Copy All Tables (Markdown)">Copy All Tables (Markdown)</button>
<button id="copyAllMdBtn" style="display:none" aria-hidden="true"></button>
<button id="resetAllBtn" type="button" onclick="resetAllTables()" aria-label="Reset All Tables">Reset All Tables</button>
</div></div>
<script>
(function(){
  function ensureDelegation(){
    try {
      var vis = document.getElementById('copyAllTablesBtn');
      var alias = document.getElementById('copyAllMdBtn');
      if(!vis || !alias) return;
      alias.addEventListener = function(type, listener, options){
        vis.addEventListener(type, listener, options);
      };
      alias.removeEventListener = function(type, listener, options){
        vis.removeEventListener(type, listener, options);
      };
      Object.defineProperty(alias, 'onclick', {
        set: function(fn){ vis.onclick = fn; },
        get: function(){ return vis.onclick; },
        configurable: true
      });
      alias.focus = function(){ vis.focus(); };
      alias.blur = function(){ vis.blur(); };
    } catch(e) {
      try{ console && console.warn && console.warn('alias delegation failed', e); }catch(_){} 
    }
  }
  if(document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', ensureDelegation);
  } else {
    ensureDelegation();
  }
})();
</script>
<noscript><div style='color:#b91c1c'>JavaScript is disabled. Tables will be shown statically. For large tables enable JS for virtualization.</div></noscript>
<div id="tocBar" role="navigation" aria-label="Table of contents"><ul><li class="toc-item"><a class="toc-link" href="#Table1">Table 1</a></li>
<li class="toc-item"><a class="toc-link" href="#Table2">Table 2</a></li>
<li class="toc-item"><a class="toc-link" href="#Table3">Table 3</a></li>
<li class="toc-item"><a class="toc-link" href="#Table4">Table 4</a></li>
<li class="toc-item"><a class="toc-link" href="#Table5">Table 5</a></li></ul></div></div>
<div class="table-caption" id="Table1" data-table="Docu_0046_01" style="margin-top:2mm;margin-left:3mm;"><strong>Option A • Safe Preprocessor in server.py (Immediate Mitigation)</strong></div>
<div class="table-wrapper" data-table-id="table-1"><div class="table-heading-bar" aria-label="Table heading"></div><div class="table-container"><div class="table-header-wrapper" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;"><div class="copy-buttons"><button type="button" class="copy-plain-btn" data-action="copy-plain" onclick="copyTablePlain(this)">Copy Plain Table</button><button type="button" class="copy-markdown-btn" data-action="copy-markdown" onclick="copyTableMarkdown(this)">Copy Markdown Table</button><button type="button" class="export-csv-btn" data-action="export-csv" onclick="exportTableCSV(this)">Export CSV</button><button type="button" class="export-json-btn" data-action="export-json" onclick="exportTableJSON(this)">Export JSON</button><button type="button" class="export-xlsx-btn" data-action="export-xlsx" onclick="exportTableXLSX(this)">Export XLSX</button><button type="button" class="export-pdf-btn" data-action="export-pdf" onclick="exportTablePDF(this)">Export PDF</button><button type="button" class="export-markdown-btn export-markdown-initial" data-action="export-markdown" onclick="exportTableMarkdown(this)" style="display:none" data-initial-hidden="1">Export Markdown</button></div><div style="display:flex; align-items:center;"><button type="button" class="toggle-table-btn" data-action="toggle-collapse" onclick="toggleTable(this)">Collapse Table</button></div></div><table class="tv-table" role="table"><thead><tr><th aria-label="Sort by Aspect" class="tv-col-left" role="button"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Aspect</div><button aria-label="Toggle sort" class="sort-btn sort-state-0" title="Toggle sort"><span aria-hidden="true" class="sort-icon"></span></button></div></th><th aria-label="Sort by Detailed Explanation" class="tv-col" role="button"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Detailed Explanation</div><button aria-label="Toggle sort" class="sort-btn sort-state-0" title="Toggle sort"><span aria-hidden="true" class="sort-icon"></span></button></div></th></tr></thead><tbody><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Core Concept</strong></div></div></td><td data-label="Detailed Explanation"> Add a lightweight <strong>pre-processing layer inside <code>server.py</code></strong> that detects and escapes list markers (like <code>1.</code> or <code>-</code>) when they appear at the start of table cells. It prevents Markdown from converting them into lists, while keeping visible text unchanged. </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Location in Flow</strong></div></div></td><td data-label="Detailed Explanation"> Implemented directly <strong>before <code>_render_text_with_fallbacks()</code></strong> or within <code>convert()</code> just before text is sent to the Markdown or HTML renderers.                                                                                                                </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Advantages</strong></div></div></td><td data-label="Detailed Explanation"> - <strong>Immediate fix</strong> — no deep refactor.<br/> - <strong>Zero dependency</strong> changes (pure text-level).<br/> - <strong>Reversible</strong> — remove one function to revert.<br/> - <strong>No behavioral regressions</strong> expected.<br/> - <strong>Safe even if renderer changes later.</strong> </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Risks / Limitations</strong></div></div></td><td data-label="Detailed Explanation"> - It’s a <strong>symptom-level fix</strong>, not a root cause solution.<br/> - The escaping step runs per request, so it adds a small (negligible) CPU overhead.<br/> - If the Markdown parser later improves internally, this preprocessor could become redundant.             </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Testing Plan</strong></div></div></td><td data-label="Detailed Explanation"> - Input: a mix of normal tables, list-containing tables, and non-table lists.<br/> - Verify: rendered HTML should show correct table structure, no unintended <code>&lt;ol&gt;</code>/<code>&lt;ul&gt;</code>.<br/> - Edge Cases: nested tables, mixed tabs/spaces, escaped pipes.                   </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Rollback</strong></div></div></td><td data-label="Detailed Explanation"> Simply comment out or delete <code>_escape_leading_list_markers_in_table_cells()</code> and its invocation.                                                                                                                                                                 </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Implementation Effort</strong></div></div></td><td data-label="Detailed Explanation"> ≈ 10–15 lines of Python (already conceptually written). Integration &lt; 10 min.                                                                                                                                                                                    </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Best For</strong></div></div></td><td data-label="Detailed Explanation"> Quick mitigation, production-safe, requires no Markdown parser modification, minimal regression risk.                                                                                                                                                            </td></tr></tbody></table></div><div class="row-count">Rows: 8</div></div><div class="table-caption" id="Table2" data-table="Docu_0046_02" style="margin-top:2mm;margin-left:3mm;"><strong>Option B • Renderer-Level Fix (Long-Term Semantic Solution)</strong></div>
<div class="table-wrapper" data-table-id="table-2"><div class="table-heading-bar" aria-label="Table heading"></div><div class="table-container"><div class="table-header-wrapper" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;"><div class="copy-buttons"><button type="button" class="copy-plain-btn" data-action="copy-plain" onclick="copyTablePlain(this)">Copy Plain Table</button><button type="button" class="copy-markdown-btn" data-action="copy-markdown" onclick="copyTableMarkdown(this)">Copy Markdown Table</button><button type="button" class="export-csv-btn" data-action="export-csv" onclick="exportTableCSV(this)">Export CSV</button><button type="button" class="export-json-btn" data-action="export-json" onclick="exportTableJSON(this)">Export JSON</button><button type="button" class="export-xlsx-btn" data-action="export-xlsx" onclick="exportTableXLSX(this)">Export XLSX</button><button type="button" class="export-pdf-btn" data-action="export-pdf" onclick="exportTablePDF(this)">Export PDF</button><button type="button" class="export-markdown-btn export-markdown-initial" data-action="export-markdown" onclick="exportTableMarkdown(this)" style="display:none" data-initial-hidden="1">Export Markdown</button></div><div style="display:flex; align-items:center;"><button type="button" class="toggle-table-btn" data-action="toggle-collapse" onclick="toggleTable(this)">Collapse Table</button></div></div><table class="tv-table" role="table"><thead><tr><th aria-label="Sort by Aspect" class="tv-col-left" role="button"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Aspect</div><button aria-label="Toggle sort" class="sort-btn sort-state-0" title="Toggle sort"><span aria-hidden="true" class="sort-icon"></span></button></div></th><th aria-label="Sort by Detailed Explanation" class="tv-col" role="button"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Detailed Explanation</div><button aria-label="Toggle sort" class="sort-btn sort-state-0" title="Toggle sort"><span aria-hidden="true" class="sort-icon"></span></button></div></th></tr></thead><tbody><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Core Concept</strong></div></div></td><td data-label="Detailed Explanation"> Fix the issue <strong>at the source</strong> — the Markdown → HTML conversion pipeline (e.g., <code>convert.py</code>, <code>render.convert</code>, or the Markdown renderer functions). Modify the parser so that <strong>table cell content is treated as literal text</strong>, not as a top-level Markdown block.                                                                 </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Location in Flow</strong></div></div></td><td data-label="Detailed Explanation"> Deep inside <code>convert.py</code> or the renderer module (e.g., <code>render/core_table.py</code>, or wherever Markdown is parsed).                                                                                                                                                                                                                       </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Mechanism</strong></div></div></td><td data-label="Detailed Explanation"> - Adjust how each table cell’s text is parsed: treat each cell’s content as <strong>inline-only Markdown</strong>, disallowing block-level syntax such as lists, headings, or quotes.<br/> - Alternatively, wrap cell text with “literal” or “verbatim” guards before rendering (e.g., escape list patterns before parser tokenization, not after). </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Effect on Output</strong></div></div></td><td data-label="Detailed Explanation"> Properly scoped Markdown behavior: tables render cleanly with <code>&lt;td&gt;</code> cells, but still allow inline formatting (like <code>*italic*</code>, <code>**bold**</code>). Lists inside cells stay literal unless explicitly escaped.                                                                                                                               </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Scope of Impact</strong></div></div></td><td data-label="Detailed Explanation"> Applies globally to all Markdown table rendering — ensures consistent literal treatment across the app.                                                                                                                                                                                                                               </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Advantages</strong></div></div></td><td data-label="Detailed Explanation"> - <strong>Root cause elimination</strong>.<br/> - Cleaner, <strong>semantically correct behavior</strong> (Markdown lists belong outside tables).<br/> - No pre/post string manipulation needed in server.py.<br/> - More efficient (one parse pass).                                                                                                              </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Risks / Limitations</strong></div></div></td><td data-label="Detailed Explanation"> - Requires touching Markdown parser internals or render conversion functions.<br/> - Potential regression if Markdown library updates or if other modules depend on current behavior.<br/> - Slightly longer development/testing cycle (~1–2 hours of careful testing).                                                                 </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Testing Plan</strong></div></div></td><td data-label="Detailed Explanation"> - Test all Markdown constructs in cells (lists, headings, quotes).<br/> - Confirm inline formatting still works.<br/> - Compare output with Table Viewer to ensure parity.<br/> - Regression-test non-table Markdown rendering.                                                                                                          </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Rollback</strong></div></div></td><td data-label="Detailed Explanation"> Restore the original Markdown parsing function or flag; changes localized to one renderer.                                                                                                                                                                                                                                            </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Implementation Effort</strong></div></div></td><td data-label="Detailed Explanation"> Moderate (1–2 hours), requires knowledge of render.convert internals.                                                                                                                                                                                                                                                                 </td></tr><tr><td data-label="Aspect"><div class="tv-left-col"><div class="left-col-heading"><strong>Best For</strong></div></div></td><td data-label="Detailed Explanation"> Permanent, clean architectural solution; projects expecting future Markdown extensions or renderer reuse.                                                                                                                                                                                                                             </td></tr></tbody></table></div><div class="row-count">Rows: 11</div></div><div class="table-caption" id="Table3" data-table="Docu_0046_03" style="margin-top:2mm;margin-left:3mm;"><strong>Summary Comparison</strong></div>
<div class="table-wrapper" data-table-id="table-3"><div class="table-heading-bar" aria-label="Table heading"></div><div class="table-container"><div class="table-header-wrapper" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;"><div class="copy-buttons"><button type="button" class="copy-plain-btn" data-action="copy-plain" onclick="copyTablePlain(this)">Copy Plain Table</button><button type="button" class="copy-markdown-btn" data-action="copy-markdown" onclick="copyTableMarkdown(this)">Copy Markdown Table</button><button type="button" class="export-csv-btn" data-action="export-csv" onclick="exportTableCSV(this)">Export CSV</button><button type="button" class="export-json-btn" data-action="export-json" onclick="exportTableJSON(this)">Export JSON</button><button type="button" class="export-xlsx-btn" data-action="export-xlsx" onclick="exportTableXLSX(this)">Export XLSX</button><button type="button" class="export-pdf-btn" data-action="export-pdf" onclick="exportTablePDF(this)">Export PDF</button><button type="button" class="export-markdown-btn export-markdown-initial" data-action="export-markdown" onclick="exportTableMarkdown(this)" style="display:none" data-initial-hidden="1">Export Markdown</button></div><div style="display:flex; align-items:center;"><button type="button" class="toggle-table-btn" data-action="toggle-collapse" onclick="toggleTable(this)">Collapse Table</button></div></div><table class="tv-table" role="table"><thead><tr><th aria-label="Sort by Criterion" class="tv-col-left" role="button"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Criterion</div><button aria-label="Toggle sort" class="sort-btn sort-state-0" title="Toggle sort"><span aria-hidden="true" class="sort-icon"></span></button></div></th><th aria-label="Sort by Option A — Preprocessor" class="tv-col" role="button"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Option A — Preprocessor</div><button aria-label="Toggle sort" class="sort-btn sort-state-0" title="Toggle sort"><span aria-hidden="true" class="sort-icon"></span></button></div></th><th aria-label="Sort by Option B — Renderer-Level" class="tv-col" role="button"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Option B — Renderer-Level</div><button aria-label="Toggle sort" class="sort-btn sort-state-0" title="Toggle sort"><span aria-hidden="true" class="sort-icon"></span></button></div></th></tr></thead><tbody><tr><td data-label="Criterion"><div class="tv-left-col"><div class="left-col-heading"><strong>Speed to Implement</strong></div></div></td><td data-label="Option A — Preprocessor"> ★★★★★ (Immediate)               </td><td data-label="Option B — Renderer-Level"> ★★☆☆☆ (Moderate)                          </td></tr><tr><td data-label="Criterion"><div class="tv-left-col"><div class="left-col-heading"><strong>Safety / Reversibility</strong></div></div></td><td data-label="Option A — Preprocessor"> ★★★★★                           </td><td data-label="Option B — Renderer-Level"> ★★★★☆                                     </td></tr><tr><td data-label="Criterion"><div class="tv-left-col"><div class="left-col-heading"><strong>Depth of Fix</strong></div></div></td><td data-label="Option A — Preprocessor"> ★★☆☆☆ (Symptom-level)           </td><td data-label="Option B — Renderer-Level"> ★★★★★ (Root cause)                        </td></tr><tr><td data-label="Criterion"><div class="tv-left-col"><div class="left-col-heading"><strong>Code Impact Area</strong></div></div></td><td data-label="Option A — Preprocessor"> server.py only                  </td><td data-label="Option B — Renderer-Level"> convert.py / renderer modules             </td></tr><tr><td data-label="Criterion"><div class="tv-left-col"><div class="left-col-heading"><strong>Regression Risk</strong></div></div></td><td data-label="Option A — Preprocessor"> Very low                        </td><td data-label="Option B — Renderer-Level"> Moderate (depends on Markdown internals)  </td></tr><tr><td data-label="Criterion"><div class="tv-left-col"><div class="left-col-heading"><strong>Performance Impact</strong></div></div></td><td data-label="Option A — Preprocessor"> Negligible                      </td><td data-label="Option B — Renderer-Level"> None                                      </td></tr><tr><td data-label="Criterion"><div class="tv-left-col"><div class="left-col-heading"><strong>Maintenance Future-Proofing</strong></div></div></td><td data-label="Option A — Preprocessor"> Medium                          </td><td data-label="Option B — Renderer-Level"> High                                      </td></tr><tr><td data-label="Criterion"><div class="tv-left-col"><div class="left-col-heading"><strong>Recommended Path</strong></div></div></td><td data-label="Option A — Preprocessor"> Use now to stabilize production </td><td data-label="Option B — Renderer-Level"> Implement later for long-term correctness </td></tr></tbody></table></div><div class="row-count">Rows: 8</div></div><div class="table-caption" id="Table4" data-table="Docu_0046_04" style="margin-top:2mm;margin-left:3mm;"><strong>Recommendation</strong></div>
<div class="table-wrapper" data-table-id="table-4"><div class="table-heading-bar" aria-label="Table heading"></div><div class="table-container"><div class="table-header-wrapper" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;"><div class="copy-buttons"><button type="button" class="copy-plain-btn" data-action="copy-plain" onclick="copyTablePlain(this)">Copy Plain Table</button><button type="button" class="copy-markdown-btn" data-action="copy-markdown" onclick="copyTableMarkdown(this)">Copy Markdown Table</button><button type="button" class="export-csv-btn" data-action="export-csv" onclick="exportTableCSV(this)">Export CSV</button><button type="button" class="export-json-btn" data-action="export-json" onclick="exportTableJSON(this)">Export JSON</button><button type="button" class="export-xlsx-btn" data-action="export-xlsx" onclick="exportTableXLSX(this)">Export XLSX</button><button type="button" class="export-pdf-btn" data-action="export-pdf" onclick="exportTablePDF(this)">Export PDF</button><button type="button" class="export-markdown-btn export-markdown-initial" data-action="export-markdown" onclick="exportTableMarkdown(this)" style="display:none" data-initial-hidden="1">Export Markdown</button></div><div style="display:flex; align-items:center;"><button type="button" class="toggle-table-btn" data-action="toggle-collapse" onclick="toggleTable(this)">Collapse Table</button></div></div><table class="tv-table" role="table"><thead><tr><th aria-label="Sort by Timeframe" class="tv-col-left" role="button"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Timeframe</div><button aria-label="Toggle sort" class="sort-btn sort-state-0" title="Toggle sort"><span aria-hidden="true" class="sort-icon"></span></button></div></th><th aria-label="Sort by Recommendation" class="tv-col" role="button"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Recommendation</div><button aria-label="Toggle sort" class="sort-btn sort-state-0" title="Toggle sort"><span aria-hidden="true" class="sort-icon"></span></button></div></th><th aria-label="Sort by Description" class="tv-col" role="button"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">Description</div><button aria-label="Toggle sort" class="sort-btn sort-state-0" title="Toggle sort"><span aria-hidden="true" class="sort-icon"></span></button></div></th></tr></thead><tbody><tr><td data-label="Timeframe"><div class="tv-left-col"><div class="left-col-content">Short Term (Immediate Release)</div></div></td><td data-label="Recommendation"> Implement Option A (server.py preprocessor)        </td><td data-label="Description"> Safe, contained fix that immediately resolves visible symptoms in PasteToTable (PTT).                 </td></tr><tr><td data-label="Timeframe"><div class="tv-left-col"><div class="left-col-content">Medium Term (Refactor Cycle)</div></div></td><td data-label="Recommendation"> Transition to Option B (renderer-level correction) </td><td data-label="Description"> Refactor to ensure the Markdown cell parser handles inline text literally once stability is achieved. </td></tr></tbody></table></div><div class="row-count">Rows: 2</div></div><div class="table-caption" id="Table5" data-table="Docu_0046_05" style="margin-top:2mm;margin-left:3mm;"><strong>Option B (Detailed)</strong></div>
<div class="table-wrapper" data-table-id="table-5"><div class="table-heading-bar" aria-label="Table heading"></div><div class="table-container"><div class="table-header-wrapper" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;"><div class="copy-buttons"><button type="button" class="copy-plain-btn" data-action="copy-plain" onclick="copyTablePlain(this)">Copy Plain Table</button><button type="button" class="copy-markdown-btn" data-action="copy-markdown" onclick="copyTableMarkdown(this)">Copy Markdown Table</button><button type="button" class="export-csv-btn" data-action="export-csv" onclick="exportTableCSV(this)">Export CSV</button><button type="button" class="export-json-btn" data-action="export-json" onclick="exportTableJSON(this)">Export JSON</button><button type="button" class="export-xlsx-btn" data-action="export-xlsx" onclick="exportTableXLSX(this)">Export XLSX</button><button type="button" class="export-pdf-btn" data-action="export-pdf" onclick="exportTablePDF(this)">Export PDF</button><button type="button" class="export-markdown-btn export-markdown-initial" data-action="export-markdown" onclick="exportTableMarkdown(this)" style="display:none" data-initial-hidden="1">Export Markdown</button></div><div style="display:flex; align-items:center;"><button type="button" class="toggle-table-btn" data-action="toggle-collapse" onclick="toggleTable(this)">Collapse Table</button></div></div><table class="tv-table" role="table"><thead><tr><th aria-label="Sort by **Topic**" class="tv-col-left" role="button"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;"><strong>Topic</strong></div><button aria-label="Toggle sort" class="sort-btn sort-state-0" title="Toggle sort"><span aria-hidden="true" class="sort-icon"></span></button></div></th><th aria-label="Sort by **Details**" class="tv-col" role="button"><div class="th-with-sort"><div style="flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;"><strong>Details</strong></div><button aria-label="Toggle sort" class="sort-btn sort-state-0" title="Toggle sort"><span aria-hidden="true" class="sort-icon"></span></button></div></th></tr></thead><tbody><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Summary</strong></div></div></td><td data-label="Details"> Protect table-cell content from markdown list parsing by escaping leading list markers inside cells before markdown→HTML. Minimal, reversible, and renderer-level.                                                             </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Rationale</strong></div></div></td><td data-label="Details"> Parser-level fix is invasive. Escaping only leading markers inside cells preserves visuals and prevents list recognition. Safe and toggleable.                                                                                 </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Scope of change</strong></div></div></td><td data-label="Details"> render/convert.py (render_table), html_renderer.py (fallbacks), utils.py (shared helper). Add tests and optional config flag.                                                                                                  </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Helper (place)</strong></div></div></td><td data-label="Details"> <code>protect_leading_list_markers_in_cell(text)</code> in utils.py. Conservative checks for <code>&lt;pre&gt;</code>, <code>&lt;code&gt;</code>, triple backticks, leading backtick, <code>&lt;script&gt;</code>, <code>&lt;textarea&gt;</code>.                                                             </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Helper behavior</strong></div></div></td><td data-label="Details"> If cell starts (after whitespace) with <code>N.</code> or <code>N)</code> or <code>-/*/+</code> convert marker characters to numeric HTML entities. Leave code/pre/HTML blocks intact. Return string.                                                           </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Integration point (render_table)</strong></div></div></td><td data-label="Details"> Before calling markdown_to_html on a cell, call helper on the raw cell text. Preserve existing newline-collapse logic. Import helper defensively.                                                                              </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Integration point (html_renderer)</strong></div></div></td><td data-label="Details"> Apply helper to each cell value (string) before stash/inline processing or before calling md. Honor fallback renderers.                                                                                                        </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Defensive import</strong></div></div></td><td data-label="Details"> Try <code>from utils import protect_leading_list_markers_in_cell</code> and degrade gracefully if import fails.                                                                                                                           </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Config toggle</strong></div></div></td><td data-label="Details"> Add renderer config key <code>protect_cell_list_markers</code> default <code>True</code>. Check before applying helper.                                                                                                                              </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Tests (file)</strong></div></div></td><td data-label="Details"> <code>tests/test_cell_list_protection.py</code> with pytest cases: ordered, unordered, leading spaces, inline code, HTML blocks, multi-cell rows, CSV/pipe variants.                                                                      </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Example test asserts</strong></div></div></td><td data-label="Details"> No <code>&lt;ol&gt;</code>/<code>&lt;ul&gt;</code> generated. Original marker characters still visible in rendered output. Code/pre blocks unaffected.                                                                                                           </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Edge cases</strong></div></div></td><td data-label="Details"> Intentional sub-lists in cells blocked. Workaround: use explicit HTML <code>&lt;ul&gt;</code>/<code>&lt;ol&gt;</code> or a config flag to allow cell lists. Engines that run after entity conversion remain unaffected because entities break list tokenization. </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Performance</strong></div></div></td><td data-label="Details"> Per-cell regex checks. Negligible for typical tables. Heuristic: only process cells starting with whitespace + digit or bullet.                                                                                                </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Migration &amp; rollout</strong></div></div></td><td data-label="Details"> Implement helper. Patch render.convert and html_renderer. Add tests. Run unit and integration tests. QA feature branch, then merge to main.                                                                                    </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Validation checklist</strong></div></div></td><td data-label="Details"> Unit tests pass. Regression tests for code/pre/HTML pass. Visual check in browser. End-to-end server→renderer test. Feature flag present.                                                                                      </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Rollback &amp; mitigations</strong></div></div></td><td data-label="Details"> Remove helper calls or set config flag <code>protect_cell_list_markers=False</code>. Change is isolated to table-cell rendering.                                                                                                          </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Risk profile</strong></div></div></td><td data-label="Details"> Low. No filesystem or external deps. Change is small, reversible, and well-scoped.                                                                                                                                             </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Why safe (legal/ops)</strong></div></div></td><td data-label="Details"> No destructive I/O. No new dependencies. Preserves visual fidelity via entities.                                                                                                                                               </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Confidence</strong></div></div></td><td data-label="Details"> High. Fix is local, testable, and addresses symptom at the renderer layer.                                                                                                                                                     </td></tr><tr><td data-label="Topic"><div class="tv-left-col"><div class="left-col-heading"><strong>Notes for authors</strong></div></div></td><td data-label="Details"> If a genuine list inside a cell is needed, authors must use explicit HTML lists or enable an opt-in config to allow cell lists.                                                                                                </td></tr></tbody></table></div><div class="row-count">Rows: 20</div></div><script src="assets/xlsx.full.min.js?v=1758605028" defer></script>
<script src="assets/script.js?v=1759748863" defer></script>
<script src="assets/worker.js?v=1758331710" defer></script>
<script>
(function(){
  const template = "{table}_{date}";
  const userVal = "";
  const hrefPrefix = "assets";
  function formatName(tableName) {
    const date = (new Date()).toISOString().slice(0,10);
    return template.replace('{table}', tableName).replace('{date}', date).replace('{user}', userVal);
  }
  const btn = document.getElementById('exportBtn');
  if(btn) {
    btn.addEventListener('click', async function() {
      try {
        const html = document.documentElement.outerHTML;
        if(html.length > 2000000) { alert('Export refused: html too large'); return; }
        if(window.Worker) {
          const workerUrl = (function(){ try{ return hrefPrefix + '/worker.js'; }catch(e){ return null; } })();
          if(workerUrl) {
            try {
              const worker = new Worker(workerUrl);
              worker.postMessage({html: html, format: 'pdf'});
              worker.onmessage = function(e) { console.log('worker:', e.data); alert('Worker replied: '+(e.data.msg||e.data.status)); };
            } catch(err) { console.warn('Worker create failed', err); alert('Worker not available'); }
          } else { alert('Worker not available'); }
        } else { alert('Export worker not supported in this environment.'); }
      } catch(err) { console.warn('Export failed', err); alert('Export worker not available. See console for details.'); }
    });
  }
})();
window.addEventListener('load', function(){ try{ document.querySelectorAll('.table-wrapper').forEach(function(e){ e.style.opacity='1'; }); }catch(e){} });
</script>
</div>
</body>
</html>