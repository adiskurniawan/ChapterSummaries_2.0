/* overrides.css â€” Tables Viewer overrides
   Purpose: ensure mobile toggle visibility, compact mobile controls,
   defensive selectors to override inline styles, and small UX polish.
   2025-09-25
*/

/* --------------------
   Theme fallbacks (do not redefine project vars; these are conservative)
   -------------------- */
:root{
  --ovr-toggle-min-height:36px;
  --ovr-toggle-min-width:44px;
  --ovr-button-pad-xs:4px 6px;
}

/* --------------------
   Defensive helpers: ensure header wrapper and controls can wrap
   (these do not change desktop behavior; only allow wrapping if necessary)
   -------------------- */
.table-wrapper .table-header-wrapper,
.table-wrapper .table-controls {
  /* do not force layout changes on desktop; allow wrapping when constrained */
  flex-wrap: wrap !important;
  gap: 8px !important;
  align-items: center !important;
  box-sizing: border-box !important;
}

/* ensure children can shrink so they won't force horizontal scroll */
.table-wrapper .table-header-wrapper > *,
.table-wrapper .table-controls > * {
  min-width: 0 !important;
  box-sizing: border-box !important;
}

/* If convert.py injected an inline wrapper (display:flex; justify-content:space-between;),
   on narrow viewports we override that so children can wrap and the toggle becomes visible. */
@media (max-width: 600px) {
  .table-wrapper .table-header-wrapper,
  .table-wrapper .table-controls {
    justify-content: flex-start !important;
    align-items: flex-start !important;
    gap: 6px !important;
  }

  /* Make sure each immediate child is shrinkable */
  .table-wrapper .table-header-wrapper > *,
  .table-wrapper .table-controls > * {
    min-width: 0 !important;
    flex: 0 1 auto !important;
  }

  /* Bring toggle into the first visual order and make it prominent */
  .table-wrapper .table-header-wrapper > div:last-child,
  .table-wrapper .table-header-wrapper .toggle-wrapper,
  .table-wrapper .table-controls .toggle-wrapper {
    order: -2 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    margin-bottom: 6px !important;
    width: auto !important;
  }

  /* Target toggle variants: ensure visible and tappable */
  .table-wrapper .toggle-table-btn,
  .table-wrapper .table-header-wrapper .toggle-table-btn,
  .table-wrapper .table-controls .toggle-table-btn,
  button.toggle-table-btn {
    order: -1 !important;
    flex: 0 0 auto !important;
    padding: 6px 10px !important;
    font-weight: 600 !important;
    min-width: var(--ovr-toggle-min-width) !important;
    height: var(--ovr-toggle-min-height) !important;
    border-radius: 6px !important;
    white-space: nowrap !important;
    text-align: center !important;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* Compact copy/export area, horizontal-scroll if many buttons */
  .table-wrapper .copy-buttons,
  .table-wrapper .table-controls .copy-buttons {
    display: flex !important;
    flex: 1 1 auto !important;
    gap: 6px !important;
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
    align-items: center !important;
    padding-bottom: 2px !important;
  }

  .table-wrapper .copy-buttons button,
  .table-wrapper .table-controls .copy-buttons button,
  .table-wrapper .table-controls button:not(.toggle-table-btn) {
    flex: 0 0 auto !important;
    padding: var(--ovr-button-pad-xs) !important;
    font-size: 12px !important;
    min-height: 36px !important;
    white-space: nowrap !important;
  }

  /* If header wrapper contains an inline div with only the toggle, make it full-width when stacked */
  .table-wrapper .table-header-wrapper > div:last-child .toggle-table-btn {
    width: auto !important;
  }

  /* Defensive: if page has many controls and wraps, ensure toggle is still visually separate */
  .table-wrapper .toggle-table-btn {
    box-shadow: 0 1px 0 rgba(0,0,0,0.04) inset !important;
  }

  /* Reduce extra padding for compactness on smaller phones */
  @media (max-width: 420px) {
    .table-wrapper .copy-buttons button,
    .table-wrapper .table-controls .copy-buttons button {
      padding: 4px 6px !important;
      font-size: 12px !important;
    }

    /* when very narrow, make toggle span full width for clarity */
    .table-wrapper .toggle-table-btn,
    .table-wrapper .table-header-wrapper > div:last-child,
    .table-wrapper .table-controls > .toggle-wrapper {
      width: 100% !important;
      display: flex !important;
      justify-content: center !important;
      order: -3 !important;
    }
  }
}

/* --------------------
   Additional defensive rules:
   - if parent has inline justify-content:space-between, override on small screens
   -------------------- */
@media (max-width: 600px) {
  .table-wrapper .table-header-wrapper[style*="justify-content:space-between"] {
    justify-content: flex-start !important;
    gap: 8px !important;
    align-items: flex-start !important;
  }
}

/* --------------------
   Quick visual tweak to indicate the toggle when stacked
   -------------------- */
@media (max-width: 600px) {
  .table-wrapper .toggle-table-btn {
    border: 1px solid rgba(0,0,0,0.06) !important;
    background: rgba(0,0,0,0.02) !important;
  }
}

/* --------------------
   Safeguard: if any stylesheet later forces overflow:hidden on wrapper,
   ensure sticky positioning for table headers still works
   -------------------- */
.table-wrapper,
.table-container {
  overflow: visible !important;
}

/* --------------------
   End of overrides
   -------------------- */