/* style.design.css — Tables Viewer v2.1 (design system, polished)
   Revised: 2025-09-19
   Purpose: refined typography, spacing, color system and subtle UI polish
   — Checked carefully (10x) to match render/core.py + script.js class names.
*/

/* =========================
   Design tokens (variables)
   ========================= */
:root{
  /* Base colors */
  --bg: #0f1724;            /* page background (light uses white override) */
  --panel: #ffffff;         /* surface / cards */
  --muted: #6b7280;
  --text: #071127;          /* primary text (dark on light) */
  --accent: #2563eb;        /* primary brand */
  --accent-600: #1e40af;
  --border: #e6e9ee;
  --row-hover: rgba(37,99,235,0.04);
  --highlight: #fff6d6;
  --current-row: #fff1c8;

  /* Spacing & sizes */
  --space-xs: 6px;
  --space-sm: 10px;
  --space-md: 16px;
  --space-lg: 24px;
  --radius: 12px;
  --shadow-sm: 0 6px 18px rgba(16,24,40,0.06);

  /* Layout */
  --sticky-header-offset: 72px;
  --left-col-width: 28.5714%;
  --right-col-width: 71.4286%;
  --max-width: 1200px;

  /* Typography scale */
  --font-sans: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  --h1-size: 20px;
  --h2-size: 18px;
  --h3-size: 15px;
  --base-size: 15px;

  --transition-fast: 150ms cubic-bezier(.2,.9,.2,1);
}

/* Dark theme tokens override */
[data-theme="dark"]{
  --bg: #0b1220;
  --panel: #0f1724;
  --muted: #9aa6bf;
  --text: #e6eef6;
  --accent: #93c5fd;
  --accent-600: #60a5fa;
  --border: rgba(255,255,255,0.06);
  --row-hover: rgba(255,255,255,0.03);
  --highlight: #fff7d6;
  --current-row: #ffd86c;
  --shadow-sm: 0 8px 22px rgba(0,0,0,0.5);
}

/* =========================
   Base / layout
   ========================= */
*,:before,:after{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:var(--font-sans);font-size:var(--base-size);line-height:1.45;-webkit-font-smoothing:antialiased}
a{color:inherit;text-decoration:none}
[hidden]{display:none!important}
.visually-hidden{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0}

/* Centered page container */
#mainContent{padding:var(--space-lg);}
.container{max-width:var(--max-width);margin:0 auto}

/* =========================
   Header and TOC
   ========================= */
.header-main{
  position:sticky;
  top:0;
  z-index:1400;
  background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.35));
  border-bottom:1px solid var(--border);
  backdrop-filter: blur(4px);
  padding:12px 18px;
}
[data-theme="dark"] .header-main{background:linear-gradient(180deg, rgba(9,13,20,0.6), rgba(9,13,20,0.35))}

.header-top{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.app-title{margin:0;font-size:var(--h1-size);font-weight:700}
.header-actions{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.header-search{display:flex;gap:8px;align-items:center;margin-top:8px;max-width:760px;width:100%}

/* TOC bar */
.toc-bar{display:flex;align-items:center;gap:12px;width:100%;overflow-x:auto;padding:8px 4px}
.toc-list{display:flex;gap:8px;list-style:none;margin:0;padding:0}
.toc-list a{display:inline-block;padding:6px 10px;border-radius:10px;color:var(--accent);transition:background var(--transition-fast),color var(--transition-fast)}
.toc-list a:hover{background:var(--accent);color:#fff}

/* =========================
   Controls and inputs
   ========================= */
.btn{
  display:inline-flex;align-items:center;gap:8px;
  background:linear-gradient(180deg, var(--panel), color-mix(in srgb, var(--panel) 90%, transparent 10%));
  color:var(--text);
  border:1px solid var(--border);
  padding:8px 12px;border-radius:10px;cursor:pointer;
  font-size:14px;transition:transform var(--transition-fast),box-shadow var(--transition-fast);
}
.btn:hover{transform:translateY(-2px);box-shadow:var(--shadow-sm)}
.btn:active{transform:none}
.btn:focus{outline:3px solid rgba(37,99,235,0.14);outline-offset:2px}
.search-input{
  padding:8px 10px;border-radius:10px;border:1px solid var(--border);background:var(--panel);color:var(--text);min-width:220px
}
.copy-buttons{display:flex;gap:8px;align-items:center}

/* =========================
   Table card and header
   ========================= */
.table-wrapper{
  margin:var(--space-lg) 0;padding:12px;border-radius:var(--radius);background:transparent;
}
.table-title{margin:0 0 var(--space-sm) 0;font-size:var(--h3-size);font-weight:600}
.table-header-wrapper{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:8px}
.table-controls{display:flex;align-items:center;gap:8px}

/* when collapsed: hide body smoothly (script toggles .table-collapsed) */
.table-wrapper.table-collapsed .table-container{max-height:0;overflow:hidden;transition:max-height 260ms ease}
.table-wrapper.table-collapsed .toggle-table-btn{opacity:.85}

/* =========================
   Table visuals (polished)
   ========================= */
.table-container{width:100%;overflow:auto;border-radius:10px}
.data-table{
  width:100%;border-collapse:separate;border-spacing:0;table-layout:fixed;min-width:420px;
  background:var(--panel);border-radius:10px;overflow:hidden;
  box-shadow:0 4px 12px rgba(2,6,23,0.04);
}

/* header row */
.data-table thead th{
  padding:12px 14px;text-align:left;vertical-align:middle;background:linear-gradient(180deg, color-mix(in srgb, var(--panel) 96%, transparent 4%), var(--panel));
  border-bottom:1px solid var(--border);font-weight:700;font-size:1rem;position:sticky;top:var(--sticky-header-offset);z-index:1050;
}

/* body cells */
.data-table tbody td{
  padding:12px 14px;border-bottom:1px solid rgba(0,0,0,0.04);vertical-align:top;color:var(--text);background:transparent;
}

/* sticky first column: layered z-index to avoid overlap glitches */
.data-table thead th:first-child{left:0;z-index:1060;width:var(--left-col-width);min-width:140px}
.data-table th:first-child,.data-table td:first-child{
  position:sticky;left:0;z-index:1040;background:linear-gradient(90deg, color-mix(in srgb, var(--panel) 88%, transparent 12%), var(--panel));
  font-weight:700;min-width:140px;box-shadow:2px 0 10px -6px rgba(0,0,0,0.06);
}

/* zebra + hover */
.data-table tbody tr:nth-child(odd) td{background:transparent}
.data-table tbody tr:hover td{background:var(--row-hover);transition:background var(--transition-fast)}
.highlight{background:var(--highlight)!important;transition:background var(--transition-fast)}
.current-row td{background:var(--current-row)!important}

/* th sort area */
.th-with-sort{display:flex;align-items:center;gap:10px}
.th-label{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.sort-btn{display:inline-flex;align-items:center;gap:6px;background:transparent;border:0;padding:6px;border-radius:8px;cursor:pointer;color:var(--muted)}
.sort-icon{width:14px;height:14px;display:inline-block;vertical-align:middle}
.sort-state-0{opacity:.45}
.sort-state-1,.sort-state-2{opacity:1;color:var(--accent-600)}

/* collapsed body */
.table-wrapper.table-collapsed .data-table tbody{display:none}

/* small caption / row count */
.row-count{font-size:13px;color:var(--muted);margin-top:8px;margin-left:4px}

/* =========================
   Lists inside cells (refined)
   ========================= */
.data-table td ul,.data-table td ol{margin:.45rem 0;padding-left:1.25rem;list-style:none}
.data-table td ul>li,.data-table td ol>li{margin-bottom:.28rem;line-height:1.36}
.data-table td>ul>li::before{content:"— ";display:inline-block;width:1.1ch;margin-left:-1.1ch;color:var(--muted);font-weight:600}
.data-table td ul ul>li::before{content:"• ";color:var(--muted);font-weight:600;font-size:0.95em}
.data-table td ol{counter-reset:table-ol;padding-left:1.6rem}
.data-table td ol>li{counter-increment:table-ol}
.data-table td ol>li::before{content:counter(table-ol) ". ";display:inline-block;width:2.2ch;margin-left:-2.2ch;color:var(--muted)}

/* inline code */
.data-table td code{background:rgba(2,6,23,0.03);padding:2px 6px;border-radius:6px;font-family:ui-monospace,SFMono-Regular,Menlo,monospace;font-size:.92em}
[data-theme="dark"] .data-table td code{background:rgba(255,255,255,0.03)}

/* =========================
   Back to top / visibility
   ========================= */
.back-to-top{
  position:fixed;right:20px;bottom:20px;padding:10px 14px;border-radius:12px;background:var(--panel);border:1px solid var(--border);
  box-shadow:var(--shadow-sm);cursor:pointer;transition:transform var(--transition-fast),opacity var(--transition-fast)
}
.back-to-top[hidden]{opacity:0;pointer-events:none;transform:scale(.96)}

/* =========================
   Accessibility & focus
   ========================= */
a:focus,button:focus,input:focus,select:focus,textarea:focus{outline:3px solid rgba(37,99,235,0.14);outline-offset:3px}

/* =========================
   Responsive / mobile polish
   ========================= */
@media (max-width:900px){
  #mainContent{padding:14px}
  .search-input{min-width:160px}
  .table-title{font-size:1rem}
  .table-container{border-radius:10px}
  .data-table{min-width:360px}
}
@media (max-width:600px){
  .data-table td,.data-table th{padding:10px}
  .data-table td:first-child,.data-table th:first-child{min-width:110px}
  .header-top{gap:8px}
  .toc-bar{padding:6px 2px}
}

/* =========================
   Print-friendly tweaks
   ========================= */
@media print{
  .header-main,.toc-bar,.back-to-top,.btn{display:none!important}
  body{background:#fff;color:#000}
  .data-table{box-shadow:none;border:1px solid #ddd}
  .data-table thead th{position:static}
}

/* =========================
   Small helpers
   ========================= */
.kbd{display:inline-block;padding:2px 6px;border-radius:6px;border:1px solid var(--border);background:color-mix(in srgb,var(--panel) 90%,black 2%);font-family:ui-monospace,monospace;font-size:.85em}
.note{font-size:13px;color:var(--muted)}
